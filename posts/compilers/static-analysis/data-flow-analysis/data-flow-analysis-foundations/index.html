<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåŸºç¡€ä¸åŸç†ç¯‡ | åå£°ï¼Œåªæ˜¯ä¸€ç§ç³Ÿç³•çš„é”™è§‰</title><meta name=keywords content="static analysis"><meta name=description content="æ ¼ã€ä¸åŠ¨ç‚¹å®šç†ä¸ç®—æ³•å®ç°ä¼˜åŒ–"><meta name=author content="Noobi"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><link rel=preload href=https://jiayezheng.tech/images/sl.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://jiayezheng.tech/images/sl.png><link rel=icon type=image/png sizes=16x16 href=http://jiayezheng.tech/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://jiayezheng.tech/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://jiayezheng.tech/%3Clink%20resources/_gen/images/dio.webp%3E><link rel=mask-icon href=http://jiayezheng.tech/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.98.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=text/javascript async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0,skipTags:["script","noscript","style","textarea","pre"],TeX:{equationNumbers:{autoNumber:"AMS"},extensions:["AMSmath.js","AMSsymbols.js"]}}}),MathJax.Hub.Queue(function(){var e,t=MathJax.Hub.getAllJax();for(e=0;e<t.length;e+=1)t[e].SourceElement().parentNode.className+=" has-jax"}),MathJax.Hub.Config({TeX:{equationNumbers:{autoNumber:"AMS"}}})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåŸºç¡€ä¸åŸç†ç¯‡"><meta property="og:description" content="æ ¼ã€ä¸åŠ¨ç‚¹å®šç†ä¸ç®—æ³•å®ç°ä¼˜åŒ–"><meta property="og:type" content="article"><meta property="og:url" content="http://jiayezheng.tech/posts/compilers/static-analysis/data-flow-analysis/data-flow-analysis-foundations/"><meta property="og:image" content="http://jiayezheng.tech/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-09-15T11:30:03+00:00"><meta property="article:modified_time" content="2020-09-15T11:30:03+00:00"><meta property="og:site_name" content="åç°ä»£ä¸»ä¹‰ç”Ÿæ´»é»‘å®¢ ğŸ“š"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://jiayezheng.tech/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåŸºç¡€ä¸åŸç†ç¯‡"><meta name=twitter:description content="æ ¼ã€ä¸åŠ¨ç‚¹å®šç†ä¸ç®—æ³•å®ç°ä¼˜åŒ–"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://jiayezheng.tech/posts/"},{"@type":"ListItem","position":2,"name":"ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåŸºç¡€ä¸åŸç†ç¯‡","item":"http://jiayezheng.tech/posts/compilers/static-analysis/data-flow-analysis/data-flow-analysis-foundations/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåŸºç¡€ä¸åŸç†ç¯‡","name":"ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåŸºç¡€ä¸åŸç†ç¯‡","description":"æ ¼ã€ä¸åŠ¨ç‚¹å®šç†ä¸ç®—æ³•å®ç°ä¼˜åŒ–","keywords":["static analysis"],"articleBody":"Data Flow Analysis: Foundations åœ¨åº”ç”¨ç¯‡çš„æ‰€æœ‰ç®—æ³•ï¼Œéƒ½å¯ä»¥çœ‹ä½œæ˜¯ Iterative Algorithm\nç°åœ¨ï¼Œæˆ‘ä»¬ä»å½¢å¼åŒ– Formalçš„è§’åº¦æ¥å®¡è§†è¿™äº›ç®—æ³•ï¼š\nA Functional View of Iterative Algorithm   (Define)Given a CFG i.e.: a program with k nodes, the iterative algorithm updates $OUT[n]$ for every node n in each iteration.\n  (Domain)Assume the domain of the values in data flow analysis is $V$, then we can define a K-tuple\n$$ (OUT[n_1],OUT[n_2],â€¦,OUT[n_k]) $$\nas an element of set $(V_1 \\times V_2 \\times â€¦ \\times V_k)$ denoted as $V^k$, to hold the values of the analysis after each iteration.\n  (Action)Each iteration can be considered as taking an action to map an element of $V^k$ to a new element of $V^k$, through applying the transfer functions and control-flow handling, abstracted as a function $F: V^k \\to V^k$\n  (Convergence)Then the algorithm outputs a series of k-tuples iteratively util a k-tuple is the same as the last one in 2 consecutive iterations.\n  é—®é¢˜  ç®—æ³•ä¸€å®šä¼šæ”¶æ•›åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿæˆ–è€…è¯´ç®—æ³•èƒ½å¾—åˆ°ä¸€ä¸ªè§£å—ï¼Ÿ è‹¥èƒ½æ”¶æ•›ï¼Œé‚£ä¹ˆä¸åŠ¨ç‚¹å”¯ä¸€å—ï¼Ÿå¦‚æœå¤šäºä¸€ä¸ªï¼Œé‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°æœ€ä¼˜è§£ï¼Ÿ ç®—æ³•ä½•æ—¶å¯ä»¥æ”¶æ•›åˆ°ä¸åŠ¨ç‚¹ï¼Ÿæˆ‘ä»¬ä½•æ—¶å¯ä»¥å¾—åˆ°ä¸€ä¸ªè§£ï¼Ÿ  æ•°å­¦åŸºç¡€1 Maths Basis I Partial Order ååº We define poset as a pair$(P,\\sqsubseteq )$ where $\\sqsubseteq$ is a binary relation that defines a partial ordering over $P$, and $\\sqsubseteq$ has following properties:\n Reflexivity è‡ªåæ€§ï¼Œ$\\forall x \\in P, x \\sqsubseteq x$ Antisymmetry åè‡ªåæ€§ï¼Œ$\\forall x,y \\in P,x \\sqsubseteq y \\wedge y\\sqsubseteq x \\Rightarrow x=y$ Transitivity ä¼ é€’æ€§ï¼Œ$\\forall x,y,z \\in P,x \\sqsubseteq y \\wedge y\\sqsubseteq z \\Rightarrow x \\sqsubseteq z$  ä¾‹ï¼šA $(S,\\sqsubseteq$) is a poset where $S$ is the power set(å¹‚é›†) of set $\\{a,b,c\\}$ and $\\sqsubseteq$ represents $\\subseteq$(subset).\næ³¨ï¼šè¿™ä¸ªä¾‹å­è¿˜ååº”äº†posetå…ƒç´ çš„ä¸€ä¸ªåŸåˆ™ï¼Œè¦ä¹ˆ $a \\sqsubseteq b$ï¼Œè¦ä¹ˆ$b \\sqsubseteq a$ï¼Œè¦ä¹ˆbä¸aæ˜¯ä¸å¯æ¯”è¾ƒï¼ˆincomparableï¼Œå¦‚å³å›¾æ²¡æœ‰ç®­å¤´è¿æ¥çš„é›†åˆï¼‰çš„ï¼Œä¸å­˜åœ¨éª‘å¢™è€…ã€‚\nUpper and Lower Bounds ä¸Šç•Œä¸ä¸‹ç•Œ Definition:\nGiven a poset $(P,\\sqsubseteq)$ and its subset $S$ that $S \\subseteq P$, we say that $u \\in P$ is an upper bound of $S$, if $\\forall x \\in S, x \\sqsubseteq u$.\næ³¨1ï¼šä»¥ä¸Šå®šä¹‰ç”¨é™¤äº†ä¸Šç•Œå…ƒç´ ä»¥å¤–çš„å­é›†å®šä¹‰ä¸Šç•Œï¼Œå›æƒ³ä¸€ä¸‹å‡½æ•°æå€¼ç‚¹çš„å®šä¹‰ã€‚\næ³¨2ï¼š$x \\sqsubseteq u \\Leftrightarrow x \\leftarrow u$ ï¼Œä¸” $u \\in P, x \\in S$\nSimilarly, $l \\in P$ is a lower bound of $S$, if $\\forall x \\in S, l \\sqsubseteq x$.\nä¾‹å­ï¼šæ±‚å­é›†$S$çš„ä¸Šç•Œä¸ä¸‹ç•Œ\n ç­”æ¡ˆï¼š  upper bound: $\\{a,b,c \\}$\nlower bound: $\\{ \\}$\nLeast upper bound ä¸Šç¡®ç•Œ (also called LUB or join ) of $S$, written $\\sqcup S$,\nif for every upper bound of $S$, say $u$, $\\sqcup S \\sqsubseteq u$\nGreatest lower bound ä¸‹ç¡®ç•Œ (GLB or meet) of $S$, written $\\sqcap S$,\nif for every lower bound of $S$, say $u$, $\\sqcap S \\sqsubseteq u$\næ³¨ï¼šä¸Šä¸‹ç•Œæ˜¯ä¸€ä¸ªé›†åˆï¼Œè€Œä¸Šä¸‹ç¡®ç•Œæ˜¯å•ä¸ªå…ƒç´ \n**ä¾‹å­ï¼š**æ±‚å­é›†$S$çš„ä¸Šç¡®ç•Œä¸ä¸‹ç¡®ç•Œ\n  ç­”æ¡ˆï¼š\n$S$çš„ä¸Šç•Œï¼š$\\{ \\{a,b,c\\}, \\{a,b\\}\\}$\né‚£ä¹ˆ$S$çš„ä¸Šç¡®ç•Œï¼š$\\{a,b\\}$\nSçš„ä¸‹ç•Œï¼š$\\{ \\{\\}\\}$\nSçš„ä¸‹ç¡®ç•Œï¼š$\\{\\}$\n  Special Cases ç‰¹æ®Šæƒ…å†µ\nUsually, if $S$ contains only two elements $a$ and $b$ ($S={a,b}$), then\n$\\color{red}\\sqcup S$ can be written in $\\color{red}a \\sqcup b$ ( join of $a$ and $b$)\n$\\color{blue}\\sqcap S$ can be written in $\\color{blue}a \\sqcap b$ ( meet of $a$ and $b$)\næ³¨ï¼šç•¥å¾®æŠ½è±¡ï¼Œç»“åˆä¸Šé¢çš„ä¾‹å­è¿›è¡Œç†è§£ã€‚\nProperties of bounds ç•Œçš„æ€§è´¨\n  ä¸æ˜¯æ‰€æœ‰çš„ç‰›å¥¶éƒ½å«ç‰¹ä»‘è‹ï¼Œä¸æ˜¯æ‰€æœ‰çš„posetéƒ½æœ‰ LUB æˆ– GLB å”¯ä¸€æ€§ï¼š\n  è‹¥ä¸€ä¸ªposetçš„å­é›†$S$å­˜åœ¨LUBæˆ–GLBï¼Œé‚£ä¹ˆè¿™ä¸ªå­é›†çš„LUBå’ŒGLBå°†æ˜¯å”¯ä¸€çš„\n  ã€è¯æ˜ã€‘\nåè¯æ³•ï¼š\nè¦è¯æ˜ç»“è®ºï¼Œä¸å¦¨å‡è®¾ååºé›†$(Pï¼Œ\\sqsubseteq)$çš„å­é›†æ˜¯$S$ s.t. $S$å­˜åœ¨ GLB\nä¸”æ»¡è¶³å­˜åœ¨ä¸¤ä¸ªç›¸å¼‚çš„GLB $g_1$ å’Œ $g_2$ã€‚\nç”±äº $g_1$ , $g_2$ $\\in S$ï¼Œå› æ­¤ï¼Œç”± GLBçš„å®šä¹‰å¯çŸ¥ï¼š$g_1 \\sqsubseteq g_2$ ä¸” $g_2 \\sqsubseteq g_1$ã€‚\nè€Œæ ¹æ®posetçš„Antisymmetryæ€§è´¨å¯çŸ¥ï¼š$\\forall x,y \\in P,x \\sqsubseteq y \\wedge y\\sqsubseteq x \\Rightarrow x=y$\nè€Œ$g_1$ å’Œ $g_2$ç›¸å¼‚ï¼Œè¿™ä¸Antisymmetryæ€§è´¨çŸ›ç›¾ã€‚\näºæ˜¯ï¼ŒGLBæ˜¯å”¯ä¸€çš„ã€‚\nåŒç†å¯è¯ï¼ŒLUBä¹Ÿæ˜¯å”¯ä¸€çš„ã€‚\n$\\blacksquare$\n    Lattice æ ¼ Definition:\nGiven a poset $(P,\\sqsubseteq)$, $\\forall a, b \\in P$, if $a \\sqcup b$ and $a\\sqcap b$ exist, then $(P,\\sqsubseteq)$ is called a lattice.\nIntuition:\nA poset is a lattice if every pair of its elements has a LUB and a GLB.\nä¾‹1ï¼š$(S,\\sqsubseteq)$ is a lattice where $S$ is a set of integers and $\\sqsubseteq$ represents $\\le$.\nâ­• The $\\sqcup$ equals to $max\\{a,b\\}$\nThe $\\sqcap$ equals to $min\\{a,b\\}$\nä¾‹2ï¼š$(S,\\sqsubseteq)$ is not a lattice where $S$ is a set of strings , $\\sqsubseteq$ stand for the substring relation.\nâŒâ€œpinâ€ $\\sqcup$ â€œsinâ€ does not exists. ä¾‹3ï¼šA $(S,\\sqsubseteq$) is a lattice where $S$ is the power set(å¹‚é›†) of set $\\{a,b,c\\}$ and $\\sqsubseteq$ represents $\\subseteq$(subset).\nâ­• The $\\sqcup$ equals to $\\cup$\nThe $\\sqcap$ equals to $\\cap$ Semi-lattice åŠæ ¼ Definition:\nGiven a poset $(P,\\sqsubseteq)$, $\\forall a, b \\in P$,\nif only exists $a \\sqcup b$, it is called join semi-lattice.\nif only exists $a\\sqcap b$, it is called meet semi-lattice.\n*Complete lattice Definition:\nGiven a lattice $(P,\\sqsubseteq)$ , for arbitrary subset of $S$ of $P$, if $\\sqcup S$ and $\\sqcap S$ exists, then $(P,\\sqsubseteq)$ is called a complete lattice.\nIntuition:\nAll subsets of a lattice have a LUB and GLB\nä¾‹1ï¼š$(S,\\sqsubseteq)$ is not a complete lattice where $S$ is a set of integers and $\\sqsubseteq$ represents $\\le$.\nâŒ For a subset $S^+$ including all positive integers, it has no $\\sqcup S^+ (+\\infin)$\n*ä¾‹2ï¼šA $(S,\\sqsubseteq$) is a complete lattice where $S$ is the power set(å¹‚é›†) of set $\\{a,b,c\\}$ and $\\sqsubseteq$ represents $\\subseteq$(subset).\nâ­• The $\\sqcup$ equals to $\\cup$\nThe $\\sqcap$ equals to $\\cap$ Properties:\n  Every complete lattice $(P,\\sqsubseteq)$ has:\n a greatest element $\\top = \\sqcup P$ called top. a least element $\\bot = \\sqcap P$ called bottom.    Every finite lattice (P is finite) is a complete lattice. æœ‰ç©·æ ¼ä¸€å®šæ˜¯å®Œå…¨æ ¼.\n  A complete lattice is not bound to be a finite lattice å®Œå…¨æ ¼ä¸ä¸€å®šæ˜¯æœ‰ç©·é›†åˆ\n e.g. : $\\{ x\\in R\\ |\\ 0\\le x \\le1\\}$ is a complete lattice with infinite numbers of elements    Product Lattice  Recall Cartesian product å¤ä¹ ä¸€ä¸‹ç¬›å¡å°”ç§¯: e.g. Given set $A=\\{a,b\\}$ and $B=\\{1,2,3\\} $, $A \\times B = \\{(a,1),(a,2),(a,3),(b,1),(b,2),(b,3)\\}$\n Definition:\nGiven lattices $L_1 = (P_1, \\sqsubseteq_1)$, $L_2 = (P_2, \\sqsubseteq_2)$, â€¦ , $L_n = (P_n, \\sqsubseteq_n)$,\nif $\\forall i$, $(P_n, \\sqsubseteq_n)$ has $\\sqcup_i$ (least upper bound) and $\\sqcap_i$ (greatest lower bound), then\nwe can have a product lattice $L^n = (P, \\sqsubseteq)$ that is defined by:\n $P = P_1 \\times P_2 \\times â€¦ \\times P_n$ $(x_1, â€¦ , x_n) \\sqsubseteq (y_1, â€¦, y_n) \\Leftrightarrow (x_1 \\sqsubseteq y_1) \\wedge (x_2 \\sqsubseteq y_2) \\wedge â€¦ \\wedge (x_n \\sqsubseteq y_n)$  æ³¨ï¼šå³è¾¹å³åŒæ—¶æ»¡è¶³è¿™äº›å…³ç³»   $(x_1, â€¦ , x_n) \\sqcup (y_1 , â€¦, y_n) =(x_1 \\sqcup y_1 ,â€¦,x_n \\sqcup y_n)$ $(x_1, â€¦ , x_n) \\sqcap (y_1 , â€¦, y_n) =(x_1 \\sqcap y_1 ,â€¦,x_n \\sqcap y_n)$  Properties:\n  A product lattice is a lattice.\næ³¨ï¼šæœ¬èº«æ€§è´¨ä¸å˜ï¼Œä»æ˜¯æ ¼\n  If a product lattice $L^n$ is a product of complete (and finite) lattices, then $L^n$ is also complete (and finite).\næ³¨ï¼šä½œç§¯ï¼Œå®Œå…¨æ€§ä¸æœ‰é™æ€§ä¸å˜\n   Data Flow Analysis Framework via Lattice ä»¥æ ¼ä¸ºåŸºç¡€çš„æ•°æ®æµåˆ†ææ¡†æ¶\nFramework in a formal meaning A data flow analysis framework $\\color{black}(\\color{red}D,\\color{green}L,\\color{blue}F \\color{black})$ consists of:\n $\\color{red}D$: a direction of data flow: forwards or backwards $\\color{green}L$: a lattice including domain of the values $V$ and a meet $\\sqcap$ or join $\\sqcup$ operator $\\color{blue} F$: a family of transfer functions i.e. $f: V â†’ V$  Data flow analysis can be seen as iteratively applying transfer functions and meet/join operations on the value of a lattice.\næ¥ä¸‹æ¥ï¼Œå°±è¦å›ç­”å¼€ç¯‡çš„é—®é¢˜\n ç®—æ³•ä¸€å®šä¼šæ”¶æ•›åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿæˆ–è€…è¯´ç®—æ³•èƒ½å¾—åˆ°ä¸€ä¸ªè§£å—ï¼Ÿ è‹¥èƒ½æ”¶æ•›ï¼Œé‚£ä¹ˆä¸åŠ¨ç‚¹å”¯ä¸€å—ï¼Ÿå¦‚æœå¤šäºä¸€ä¸ªï¼Œé‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°æœ€ä¼˜è§£ï¼Ÿ ç®—æ³•ä½•æ—¶å¯ä»¥æ”¶æ•›åˆ°ä¸åŠ¨ç‚¹ï¼Ÿæˆ‘ä»¬ä½•æ—¶å¯ä»¥å¾—åˆ°ä¸€ä¸ªè§£ï¼Ÿ\n ç®—æ³•ä¸€å®šå¯ä»¥è¾¾åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿ å¤ä¹ ä¸€ä¸‹ï¼Œåº”ç”¨ç¯‡å…³äºå‡½æ•°å•è°ƒæ€§çš„ç†è§£ã€‚\næˆ‘ä»¬ä¸åŠ¨ç‚¹æ˜¯æ‰€æœ‰ä¸åŠ¨ç‚¹ä¸­æœ€å¥½çš„å—ï¼Ÿåˆå¦‚ä½•å®šä¹‰â€œæœ€å¥½â€ï¼Ÿ  æ•°å­¦åŸºç¡€2 Math Basis II Monotonicity å•è°ƒæ€§ definition:\nA function $f$: $L\\rightarrow L$ ( $L$ is a lattice) is monotonic if $\\forall x, y \\in L, x \\sqsubseteq y \\Rightarrow f(x) \\sqsubseteq f(y)$\nFixed-Point Theorem ä¸åŠ¨ç‚¹å®šç† Given a complete lattice $(L, \\sqsubseteq)$, if\n $f: L \\rightarrow L$ is monotonic and $L$ is finite, then  the least fixed point of f can be found by iterating\n$f(\\bot), f(f(\\bot)), â€¦, f^k(\\bot)$ until a fixed point is reached.\n å­˜åœ¨æ€§ 2. æœ€å°æ€§*  æ³¨1ï¼šå›å¿†å•è°ƒæœ‰ç•Œå‡†åˆ™\næ³¨2ï¼šè¿™é‡Œçš„æœ€å°æ€§æ˜¯ç›¸å¯¹äº\n  èµ·å§‹ç‚¹ä¸º$\\bot$\n  å…³äº$f$ è¿­ä»£çš„â€œç›®æ ‡â€ä¸ºMayï¼ˆæ³¨æ„å’ŒForward å’Œ Backward æ— å…³ï¼‰\n  çš„æƒ…å†µè€Œè¨€ï¼ˆå›å¿†Mayå’ŒMustçš„åŒºåˆ«ï¼‰ï¼Œ\nå› æ­¤è¿™é‡Œå«åš**æœ€è¿‘æ€§ï¼ˆç¦»èµ·å§‹ç‚¹æœ€è¿‘çš„æ”¶æ•›ç‚¹ï¼‰**æ›´å¥½ã€‚\n  æ¥ä¸‹æ¥ï¼Œè¯æ˜è¿™ä¸ªå®šç†ã€‚\nã€è¯æ˜ã€‘\nå…ˆè¯å­˜åœ¨æ€§ï¼š\næ ¹æ®$\\bot$å’Œ$f$çš„å®šä¹‰ï¼Œæˆ‘ä»¬æœ‰ï¼š\n$$ \\bot \\sqsubseteq f(\\bot) $$\nåˆç”±äº $f$æ˜¯å•è°ƒçš„ï¼Œæˆ‘ä»¬æœ‰ï¼š\n$$ f(\\bot) \\sqsubseteq f( f(\\bot)) = f^2(\\bot) $$\nåŒæ ·åœ°ï¼Œä¸åœåœ°é‡å¤è¿­ä»£åº”ç”¨ $f$ï¼Œæˆ‘ä»¬æœ‰ï¼š\n$$ \\bot \\sqsubseteq f(\\bot) \\sqsubseteq f^2(\\bot)\\sqsubseteq f^3(\\bot)\\sqsubseteq â€¦\\sqsubseteq f^n(\\bot) $$\nåˆç”±äº $L$æ˜¯æœ‰é™é›†åˆï¼Œå¹¶ä¸”\n$$ f(\\top) =\\top $$\nå› æ­¤ï¼Œ$\\exists k0\\ \\ s.t.$\n$$ f^{Fix}=f^k(\\bot)=f^{k+1} (\\bot) $$\nå› æ­¤ï¼Œä¸åŠ¨ç‚¹å­˜åœ¨ã€‚\n$\\blacksquare$\nå†è¯æ˜æœ€å°ä¸åŠ¨ç‚¹ï¼Œåè¯æ³•ï¼š\nå‡è®¾åœ¨ä¸åŠ¨ç‚¹$f^k(\\bot)$çš„åŸºç¡€ä¸Šï¼Œè¿˜æœ‰ä¸€ä¸ªä¸åŠ¨ç‚¹ $x$ i.e $x = f(x)$\næ ¹æ® $\\bot$ çš„å®šä¹‰æœ‰ï¼š $\\bot \\sqsubseteq x$\næ•°å­¦å½’çº³æ³•ï¼š\n èµ·å§‹æ¡ä»¶ï¼šå› ä¸º$f$æ˜¯å•è°ƒçš„ï¼Œæˆ‘ä»¬æœ‰ï¼š  $$ f(\\bot) \\sqsubseteq f(x) $$\n å‡è®¾ $f^i(\\bot) \\sqsubseteq f^i(x)$ æˆç«‹ ç”±äº$f$å•è°ƒï¼Œäºæ˜¯$f^{i+1}(\\bot) \\sqsubseteq f^{i+1}(x)$  äºæ˜¯ç”±æ•°å­¦å½’çº³æ³•å¯çŸ¥\n$$ f^i(\\bot) \\sqsubseteq f^i(x) $$\nå› æ­¤ï¼Œå½“$f^k(\\bot) \\sqsubseteq f^k(x) = x$ æ—¶ï¼Œæˆ‘ä»¬æœ‰\n$$ f^{Fix} = f^k(\\bot) \\sqsubseteq x $$\nå› æ­¤ï¼Œä¸åŠ¨ç‚¹æ˜¯æœ€å°çš„ã€‚\n$\\blacksquare$\n  Now what we have just seen is the property (fixed point theorem) for the function on a lattice.\nWe cannot say our iterative algorithm also has that property unless we can relate the algorithm to the fixed point theorem, if possible.\nè¦å°†æˆ‘ä»¬çš„ç®—æ³•å°†ä¸åŠ¨ç‚¹å®šç†å…³è”ä¸Šã€‚\n Relate Iterative Algorithm to Fixed Point Theorem Abstraction Consider the k-tuple in Iterative Algorithm as a Product Lattice $L$\nå°†ç®—æ³•ä¸­çš„ kå…ƒç»„ï¼ˆBit Vectorï¼‰æŠ½è±¡ä¸ºProduct Lattice.\n$$ L=(P,\\sqsubseteq)\\ P=(P_1, P_2,â€¦,P_n) $$\nå°†ä¸€ä¸ªä¸€æ¬¡iterationçš„è¿‡ç¨‹æŠ½è±¡ä¸ºå‡½æ•°$f:L\\to L$\nè€Œæ•´ä¸ªæŠ½è±¡çš„è¿‡ç¨‹å¯ä»¥çœ‹ä½œå¤åˆå‡½æ•°$f^k$\nç”±äºDomainæ˜¯Product Latticeï¼Œæˆ‘ä»¬çš„æ ¹æ®å…¶å®šä¹‰ä»¥åŠç®—æ³•çš„è¡Œä¸ºï¼Œæœ‰ä»¥ä¸‹æ´è§ï¼š\n  Transfer Function: $f_i: L \\to L$\n  Join/Meet Function $\\sqcap /\\sqcup: L \\times L \\to L$ ï¼ˆæ³¨æ„è¿™é‡Œçš„$\\times$å±äºæŸå¤±ä¸¥è°¨æ€§çš„ç¬¦å·æ»¥ç”¨ï¼‰\ni.e. $(x_1, â€¦ , x_n) \\sqcup (y_1 , â€¦, y_n) =(x_1 \\sqcup y_1 ,â€¦,x_n \\sqcup y_n)$   Convergence æ”¶æ•›å­˜åœ¨æ€§  ä¸åŠ¨ç‚¹å®šç†ï¼š Given a complete lattice $(L, \\sqsubseteq)$, if $f: L \\rightarrow L$ is monotonic and $L$ is finite, then least fixed point of f can be found by iterating.\n   Finite æœ‰ç•Œ\nç”±äº Product Latticeçš„æ€§è´¨ï¼š\n If a product lattice $L_p$ is a product of complete (and finite) lattices, i.e., $(L, L, â€¦, L)$, then $L_p$ is also complete (and finite)\n å› æ­¤ï¼Œåªè¦æˆ‘ä»¬å·§å¦™åœ°æ„é€ $L$ï¼Œä½¿å¾—$L$æœ¬èº«æ˜¯Complete Latticeå¹¶ä¸”æ˜¯Finiteå³å¯ã€‚\n  Monotonic å•è°ƒ\nè®¨è®º $f:L\\to L$:\nç”±äº$f$çš„æ“ä½œä¸ºï¼š\n  transfer function:\nç”±äº$gen_B$å’Œ$kill_B$ä¸ºå¸¸æ•°ï¼Œå®¹æ˜“è¯æ˜å…¶å•è°ƒæ€§ã€‚\n  join / meet function$\\sqcup / \\sqcap$:\n    æˆ‘ä»¬è¯æ˜ 2.çš„å•è°ƒæ€§\nä¸å¦¨è¯æ˜ $\\sqcup$çš„å•è°ƒæ€§ï¼š\né—®é¢˜ï¼šè‹¥ $\\forall x,y,z \\in L, x \\sqsubseteq y$ , è¯æ˜ $x \\sqcup y \\sqsubseteq y \\sqcup z$\nã€è¯æ˜ã€‘\næ ¹æ® $\\sqcup$çš„å®šä¹‰ï¼Œæœ‰ $y \\sqsubseteq y \\sqcup z$\nåˆç”±äº $x \\sqsubseteq x \\sqcup y$ ä¸” $x \\sqsubseteq y$\näºæ˜¯æœ‰ $x \\sqsubseteq y = y$\nå› æ­¤ï¼Œ$x \\sqcup y \\sqsubseteq y \\sqcup z$\nåŒç†å¯è¯ $\\sqcap$ ä¹Ÿæ˜¯å•è°ƒçš„\n$\\blacksquare$\n    äºæ˜¯ï¼Œæˆ‘ä»¬è§£å†³äº†å‰ä¸¤ä¸ªé—®é¢˜ï¼Œå³ç®—æ³•æ”¶æ•›æ€§ä¸æ”¶æ•›ç‚¹å”¯ä¸€æ€§ã€‚\nï¼ˆä¸åŠ¨ç‚¹å®šç†å¯ä»¥ä¸€æ¬¡å›ç­”å‰ä¸¤ä¸ªé—®é¢˜ï¼‰\nPerformance Analysis æ€§èƒ½åˆ†æ ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œç®—æ³•ä½•æ—¶æ”¶æ•›ï¼Œå³ç®—æ³•çš„å¤æ‚åº¦å¦‚ä½•ï¼Ÿ\næˆ‘ä»¬æ‹¿å‰é¢å¹‚é›†çš„å›¾ä¸¾ä¾‹ï¼š\næˆ‘ä»¬çŸ¥é“ï¼Œè¿™æ˜¯ä¸€ä¸ªLatticeã€‚\nå‡è®¾$\\top = \\{a,b,c\\} , \\bot = \\{\\}$\næˆ‘ä»¬å®šä¹‰ï¼šæ ¼çš„é«˜åº¦ $h$$\\top$ åˆ° $\\bot$ çš„æœ€å¤šçš„è¾¹æ•°ï¼Œæˆ–è€…è¯´ï¼Œæœ€é•¿çš„è·¯å¾„\ne.g. å³å›¾çš„ $h = 3$\nå‡è®¾ Product Lattice $L_k$ æœ‰ kä¸ªåˆ†é‡\ne.g. $L_k = (L_1, L_2,â€¦,L_k)$\nè€ƒè™‘ä¸€ç§æœ€åæƒ…å†µï¼šæ¯ä¸ªè¿­ä»£åªæœ‰**ä¸€ä¸ªåˆ†é‡ï¼ˆæ»¡è¶³Latticeæ€§è´¨ï¼‰**æ›´æ–°ï¼Œä¸”å¯¹äºæ‰€æœ‰åˆ†é‡ï¼Œéƒ½â€œèµ°â€æœ€é•¿çš„è·¯å¾„ã€‚\nå®¹æ˜“å¾—åˆ°ï¼š\nè¯¥ç®—æ³•çš„æœ€åå¤æ‚åº¦ä¸º$O(hk)$ï¼Œå…¶ä¸­$h$æ˜¯æ ¼çš„é«˜åº¦ï¼Œ$k$æ˜¯Product Latticeçš„åˆ†é‡æ•°ç›®ã€‚\n ï¼ˆé‡è¦ï¼‰May / Must Analysis, a lattice View æˆ‘ä»¬ç°åœ¨å°†ç”¨Latticeç†è®ºè§£é‡ŠMay å’Œ Must AnalysisèƒŒåçš„åŸå› ã€‚ä»ç„¶ç”¨å‡ ä¸ªé—®é¢˜æ¥é¸Ÿç°ä»¥ä¸‹è¿™ä¸ªéƒ¨åˆ†\n ä¸ºä½•May Analysis ä¼šæ‰¾åˆ°æœ€å°ä¸åŠ¨ç‚¹ / ä¸ºä½•Must Analysis ä¼šæ‰¾åˆ°æœ€å¤§ä¸åŠ¨ç‚¹ï¼Ÿ ä¸ºä½•Must Analysiså’ŒMay Analysisçš„åˆå§‹åŒ–å„è‡ªæ˜¯é‚£æ ·çš„ï¼Ÿ  å›¾ä¾‹ âš ï¸é€»è¾‘ç»•å¼¯è­¦å‘Šï¼š\nä»¥Reaching Definition Analysisä¸ºä¾‹\n é¦–å…ˆå›å¿†ï¼šå®ƒæ˜¯ä¸€ç§May Analysis å…¶æ¬¡ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨åˆ†æä¸€ä¸ªç¨‹åºæ‰€æœ‰å¯èƒ½ undefined çš„å˜é‡ ä»ä¸¤ä¸ªæç«¯æƒ…å†µè®¨è®ºï¼š   å½“åˆ†æç®—æ³•åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬å°†å…¨éƒ¨çš„Latticeåˆ†é‡åˆå§‹åŒ–ä¸º$\\bot$ã€‚\nè¿™è¯´æ˜ï¼šåœ¨èµ·å§‹æ€ï¼Œè®¤ä¸ºæ‰€æœ‰çš„Definitionéƒ½æ˜¯æ— æ³•åˆ°è¾¾çš„ï¼Œå³æ‰€æœ‰çš„Definitionåœ¨æ‰€æœ‰ç¨‹åºç‚¹éƒ½**æ— æ•ˆï¼ˆundefinedï¼‰**äº†ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œè¿™æ˜¯Unsafeçš„ã€‚\næ³¨ï¼šè¿™ä¸ªunsafeä¸safeçš„ææ³•ä¼šæœ‰æ­§ä¹‰ï¼Œä½†æ˜¯å½¢å¼é€»è¾‘ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œæš‚ä¸”æŒ‰ç…§è¯¾ç¨‹çš„è§‚ç‚¹èµ°ã€‚\n  å½“åˆ†æç®—æ³•è®¤ä¸ºï¼Œæ‰€æœ‰çš„definitionéƒ½åˆ°è¾¾äº†ï¼ˆ111â€¦111ï¼‰ï¼Œæ˜¾ç„¶ï¼Œåˆ†æç¨‹åºä¸ä¼šæŠ¥ warningï¼šxxx variable undefined ã€‚æˆ‘ä»¬è®¤ä¸ºè¿™æ˜¯Safeçš„ã€‚\n   è€Œç®—æ³•çš„è¿è¡Œè¿‡ç¨‹å°±æ˜¯ï¼šä¸æ–­æ‰©å¤§Unsafeï¼ˆundefinedï¼‰çš„èŒƒå›´ï¼ˆç”±äºæ˜¯Monotonicçš„ï¼‰ï¼Œç›´åˆ°ä¸€ä¸ªæœ€ä¼˜çš„ç‚¹ï¼ˆFixed-pointï¼‰ã€‚  æœ€ä¼˜ï¼š1. ï¼ˆæ­£ç¡®ï¼‰åœ¨é‚£ä¸€ç‚¹ï¼Œä¼šå­˜åœ¨è¯¯æŠ¥undefined æƒ…å†µï¼Œä½†æ˜¯æ‰€æœ‰çœŸæ­£undefined çš„å˜é‡éƒ½ä¼šåŒ…æ‹¬è¿›æ¥ã€‚2. ï¼ˆæœ€å¥½ï¼‰åŒ…æ‹¬è¯¯æŠ¥çš„undefined çš„èŒƒå›´æœ€å°ã€‚ è¿™å¼ å›¾å¾ˆé‡è¦ï¼Œå»ºè®®æ”¶è—ï¼ï¼ï¼    ä»¥Available Expression Analysisä¸ºä¾‹\n é¦–å…ˆï¼Œè¿™æ˜¯Must Analysis å…¶æ¬¡ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨åˆ†æä¸€ä¸ªç¨‹åºçš„è¡¨è¾¾å¼æ˜¯å¦éœ€è¦åœ¨æŸäº›BBè¿›è¡Œé‡å¤è®¡ç®—ã€‚ æç«¯æƒ…å†µï¼š   æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½availableï¼Œå³ æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½ä¸éœ€è¦é‡å¤è®¡ç®—ï¼Œæˆ‘ä»¬ç§°æ‰€æœ‰è¡¨è¾¾å¼éƒ½Unsafeã€‚\nï¼ˆç®€è®°ï¼šä¸é‡æ–°è®¡ç®—å¯èƒ½é€ æˆç»“æœé”™è¯¯ï¼Œæ‰€ä»¥å«Unsafeï¼‰\n  æ²¡æœ‰è¡¨è¾¾å¼éƒ½availableï¼Œå³ æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½éœ€è¦é‡å¤è®¡ç®—ï¼Œå³æ²¡æœ‰ä¼˜åŒ–å¯èƒ½ï¼Œæˆ‘ä»¬ç§°æ‰€æœ‰è¡¨è¾¾å¼éƒ½Safeã€‚\n   ç®—æ³•è¿è¡Œè¿‡ç¨‹ï¼šä¸æ–­æ‰©å¤§Safeçš„èŒƒå›´ï¼ˆæ³¨æ„âš ï¸è¿™ä¸€ç‚¹ï¼‰ï¼Œç›´åˆ°æœ€ä¼˜çš„ç‚¹ã€‚  æœ€ä¼˜ï¼š1. ï¼ˆæ­£ç¡®ï¼‰æ‰€æœ‰çš„unavailableè¡¨è¾¾å¼éƒ½è¢«åŒ…å«è¿›æ¥ 2. ï¼ˆæœ€å¥½ï¼‰ä¿è¯æœ¬å¯ä»¥ç¼“å­˜å´è¢«æ’é™¤çš„è¡¨è¾¾å¼æ•°ç›®æœ€å°‘ã€‚    æ€»ç»“ï¼š\n ä»¥ä¸Šä¸¤ç§åˆ†æç®—æ³•ï¼Œæœ€ç»ˆéƒ½ä½“ç°äº†Soundçš„ç»“æœã€‚ å¯¹äºæœ€å°/å¤§çš„ä¸åŠ¨ç‚¹ï¼Œä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œç”±äºæˆ‘ä»¬è®¾è®¡çš„ç®—æ³•æœ¬èº«æ¯æ¬¡è¿­ä»£çš„æ“ä½œå¤Ÿatomicï¼Œä¹Ÿå°±æ˜¯è¯´æ­¥å­è¿ˆå¾—è¶³å¤Ÿå°ï¼Œäºæ˜¯ä¸åŠ¨ç‚¹æ˜¯æœ€å°/æœ€å¤§çš„ã€‚ ç”±äºæˆ‘ä»¬transfer functionå’Œ join/meet functionçš„åˆç†è®¾è®¡ï¼Œæ»¡è¶³äº†ä¸åŠ¨ç‚¹è½åœ¨safeåŒºåŸŸçš„æ¡ä»¶   How Precise is our Solution? æˆ‘ä»¬é€šè¿‡ä»‹ç»ä¸€äº›ç†æƒ³çš„æ¨¡å‹ç”¨äºå¯¹æ¯”Iterative Algorithmæ¥è¡¡é‡Precisionã€‚\nï¼ˆå¯¹æ¯”OSå†…å­˜äº¤æ¢çš„OPTä¸LRUç®—æ³•ï¼Œä»¥åŠCLRSçš„ç«äº‰æ€§åˆ†æï¼‰\nMeet-Over-All-Paths Solution (MOP)   ä»€ä¹ˆæ˜¯MOPï¼Ÿ\nå®šä¹‰è·¯å¾„ $P=entry\\to s_1 \\to s_2 \\to â€¦\\to s_i$\nå¯¹äºè·¯å¾„$P$ï¼Œå®šä¹‰Transfer Function $F_p=f_{s_1}\\circ f_{s_2} \\circâ€¦\\circ f_{s_i}$\nè€Œ$MOP[s_i]$ï¼Œå³å°†æ‰€æœ‰ä»$entry$ åˆ°$s_i$çš„è·¯å¾„ä¸Šçš„transfer functionçš„è¾“å‡ºï¼Œmeetæˆ–joinèµ·æ¥ï¼Œæ‰¾åˆ°LUBæˆ–GLBï¼Œå½¢å¼åŒ–åœ°æœ‰ï¼š\n$$ MOP[s_i] = \\sqcup / \\sqcap_{A\\ path\\ P\\ from\\ Entry\\ to\\ S_i }F_p(OUT[Entry]) $$\n  MOPçš„å±€é™æ€§\n çœŸå®ç¨‹åºä¸­ï¼Œå­˜åœ¨CFGä¸­å­˜åœ¨ï¼Œè€ŒåŠ¨æ€ç¨‹åºä¸­ä¸ä¼šåˆ°è¾¾çš„åˆ†æ”¯ã€‚ e.g. condition always true åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼ŒMOPæ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„æ”¶æ•›ç‚¹ã€‚e.g. æ— é™å¾ªç¯    MOP vs. Iterative:ä»¥may analysis ä¸ºä¾‹ é¦–å…ˆï¼Œåˆ†åˆ«åˆ©ç”¨è¡¨è¾¾å¼æ¦‚æ‹¬MOPè¿‡ç¨‹ä¸Iterative çš„è¿‡ç¨‹ å½¢å¼åŒ–åœ°ï¼š\n$$ Iterative=F(x\\sqcup y)\\ MOP=F(x) \\sqcup F(y) $$\nå®šç†ï¼šMOPæ¯”æˆ‘ä»¬çš„æ–¹æ³•å¾—åˆ°çš„ä¸åŠ¨ç‚¹æ›´å‡†ç¡®ã€‚\nã€è¯æ˜ã€‘\næ ¹æ®$\\sqcup$çš„å®šä¹‰æœ‰ $x \\sqsubseteq x \\sqcup y$ ä»¥åŠ $y \\sqsubseteq x \\sqcup y$\nç”±äº$F_P$æ˜¯å•è°ƒçš„ï¼Œå› æ­¤æœ‰ï¼š\n$F(x) \\sqsubseteq F(x\\sqcup y)$ ä»¥åŠ $F(y) \\sqsubseteq F(x\\sqcup y)$\nåˆç”±äº\n$F(x) \\sqcup F(y) \\sqsubseteq F(x)$\näºæ˜¯ç”±ä¼ é€’æ€§ï¼š\n$F(x)\\sqcup F(y) \\sqsubseteq F(x\\sqcup y)\\ \\ i.e.\\ MOP \\sqsubseteq Iterative$\næ ¹æ®ä¸åŠ¨ç‚¹ä¸truthç‚¹çš„ç›¸å¯¹å…³ç³»ï¼Œå¯çŸ¥$MOP$æ¯”$Iterative$æ›´å‡†ã€‚\n$\\blacksquare$\næ¨è®ºï¼šå½“ä¸”ä»…å½“$F_P$æ»¡è¶³åˆ†é…å¾‹ï¼ˆdistributiveï¼‰ï¼Œ$MOP$ä¸$Iterative$çš„å‡†ç¡®åº¦ç›¸ç­‰\nå½¢å¼åŒ–åœ°ï¼Œå³ $F(x)\\sqcup F(y) = F(x\\sqcup y)$\n Worklist Algorithm å¯¹äºï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€äº›ä¼˜åŒ–çš„æ‰‹æ®µï¼Œæˆ–è€…è¯´ï¼Œconcrete methods to implementationã€‚\né—®é¢˜ï¼š\nå¯¹äºIterative Algorithmï¼Œ whileåˆ¤æ–­ä¸åŠ¨ç‚¹æ—¶ï¼Œå­˜åœ¨å†—ä½™çš„è®¡ç®—ï¼Œå¦‚ä½•æ¶ˆé™¤å†—ä½™ï¼Ÿ\nIdeaï¼š\nåˆ©ç”¨ä¸€ä¸ªworklistæ¥ä¿å­˜å„ä¸ªBBçš„çŠ¶æ€ï¼Œè‹¥æŸä¸ªBBå·²ç»åˆ°è¾¾ä¸åŠ¨ç‚¹ï¼Œå°±è¸¢å‡ºworklistã€‚\nå¦åˆ™ï¼Œå°±éœ€è¦è®¡ç®—BBçš„æ‰€æœ‰åç»§èŠ‚ç‚¹ã€‚\nAlgorithm: Forward Analysis as An Example  å¤ä¹ è¦ç‚¹  Understanding Functional View of Iterative Algorithm Lattice and Complete Lattice Fixed-Point Theorem and proof How to summarize may and must analysis in a lattice perspective.(The picture) The relation between MOP and the iterative algorithm by proof. Worklist Algorithm    ","wordCount":"1752","inLanguage":"en","datePublished":"2020-09-15T11:30:03Z","dateModified":"2020-09-15T11:30:03Z","author":{"@type":"Person","name":"Noobi"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://jiayezheng.tech/posts/compilers/static-analysis/data-flow-analysis/data-flow-analysis-foundations/"},"publisher":{"@type":"Organization","name":"åå£°ï¼Œåªæ˜¯ä¸€ç§ç³Ÿç³•çš„é”™è§‰","logo":{"@type":"ImageObject","url":"https://jiayezheng.tech/images/sl.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://jiayezheng.tech/ accesskey=h title="åå£°ï¼Œåªæ˜¯ä¸€ç§ç³Ÿç³•çš„é”™è§‰ (Alt + H)"><img src=https://jiayezheng.tech/images/sl.png alt=logo aria-label=logo height=35>åå£°ï¼Œåªæ˜¯ä¸€ç§ç³Ÿç³•çš„é”™è§‰</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://jiayezheng.tech/aboutme/ title=å…³äºæˆ‘><span>å…³äºæˆ‘</span></a></li><li><a href=http://jiayezheng.tech/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://jiayezheng.tech/ title=ä¸»é¡µ><span>ä¸»é¡µ</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://jiayezheng.tech/>Home</a>&nbsp;Â»&nbsp;<a href=http://jiayezheng.tech/posts/>Posts</a></div><h1 class=post-title>ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåŸºç¡€ä¸åŸç†ç¯‡</h1><div class=post-description>æ ¼ã€ä¸åŠ¨ç‚¹å®šç†ä¸ç®—æ³•å®ç°ä¼˜åŒ–</div><div class=post-meta><span title="2020-09-15 11:30:03 +0000 UTC">September 15, 2020</span>&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;Noobi&nbsp;|&nbsp;<a href=https://github.com/Xpectuer/my-blog/content/posts/compilers/static-analysis/data-flow-analysis/data-flow-analysis-foundations.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#data-flow-analysis-foundations aria-label="Data Flow Analysis: Foundations">Data Flow Analysis: Foundations</a><ul><ul><li><a href=#a-functional-view-of-iterative-algorithm aria-label="A Functional View of Iterative Algorithm">A Functional View of Iterative Algorithm</a></li><li><a href=#%e9%97%ae%e9%a2%98 aria-label=é—®é¢˜>é—®é¢˜</a></li></ul><li><a href=#%e6%95%b0%e5%ad%a6%e5%9f%ba%e7%a1%801-maths-basis-i aria-label="æ•°å­¦åŸºç¡€1 Maths Basis I">æ•°å­¦åŸºç¡€1 Maths Basis I</a><ul><li><a href=#partial-order-%e5%81%8f%e5%ba%8f aria-label="Partial Order ååº">Partial Order ååº</a></li><li><a href=#upper-and-lower-bounds-%e4%b8%8a%e7%95%8c%e4%b8%8e%e4%b8%8b%e7%95%8c aria-label="Upper and Lower Bounds ä¸Šç•Œä¸ä¸‹ç•Œ">Upper and Lower Bounds ä¸Šç•Œä¸ä¸‹ç•Œ</a></li><li><a href=#lattice-%e6%a0%bc aria-label="Lattice æ ¼">Lattice æ ¼</a></li><li><a href=#semi-lattice-%e5%8d%8a%e6%a0%bc aria-label="Semi-lattice åŠæ ¼">Semi-lattice åŠæ ¼</a></li><li><a href=#complete-lattice aria-label="*Complete lattice">*Complete lattice</a></li><li><a href=#product-lattice aria-label="Product Lattice">Product Lattice</a></li></ul></li><li><a href=#data-flow-analysis-framework-via-lattice aria-label="Data Flow Analysis Framework via Lattice">Data Flow Analysis Framework via Lattice</a><ul><li><a href=#framework-in-a-formal-meaning aria-label="Framework in a formal meaning">Framework in a formal meaning</a></li><li><a href=#%e7%ae%97%e6%b3%95%e4%b8%80%e5%ae%9a%e5%8f%af%e4%bb%a5%e8%be%be%e5%88%b0%e4%b8%8d%e5%8a%a8%e7%82%b9%e5%90%97 aria-label=ç®—æ³•ä¸€å®šå¯ä»¥è¾¾åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿ>ç®—æ³•ä¸€å®šå¯ä»¥è¾¾åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿ</a></li><li><a href=#%e6%88%91%e4%bb%ac%e4%b8%8d%e5%8a%a8%e7%82%b9%e6%98%af%e6%89%80%e6%9c%89%e4%b8%8d%e5%8a%a8%e7%82%b9%e4%b8%ad%e6%9c%80%e5%a5%bd%e7%9a%84%e5%90%97%e5%8f%88%e5%a6%82%e4%bd%95%e5%ae%9a%e4%b9%89%e6%9c%80%e5%a5%bd aria-label=æˆ‘ä»¬ä¸åŠ¨ç‚¹æ˜¯æ‰€æœ‰ä¸åŠ¨ç‚¹ä¸­æœ€å¥½çš„å—ï¼Ÿåˆå¦‚ä½•å®šä¹‰â€œæœ€å¥½â€ï¼Ÿ>æˆ‘ä»¬ä¸åŠ¨ç‚¹æ˜¯æ‰€æœ‰ä¸åŠ¨ç‚¹ä¸­æœ€å¥½çš„å—ï¼Ÿåˆå¦‚ä½•å®šä¹‰â€œæœ€å¥½â€ï¼Ÿ</a></li></ul></li><li><a href=#%e6%95%b0%e5%ad%a6%e5%9f%ba%e7%a1%802-math-basis-ii aria-label="æ•°å­¦åŸºç¡€2 Math Basis II">æ•°å­¦åŸºç¡€2 Math Basis II</a><ul><li><a href=#monotonicity-%e5%8d%95%e8%b0%83%e6%80%a7 aria-label="Monotonicity å•è°ƒæ€§">Monotonicity å•è°ƒæ€§</a></li><li><a href=#fixed-point-theorem-%e4%b8%8d%e5%8a%a8%e7%82%b9%e5%ae%9a%e7%90%86 aria-label="Fixed-Point Theorem ä¸åŠ¨ç‚¹å®šç†">Fixed-Point Theorem ä¸åŠ¨ç‚¹å®šç†</a></li></ul></li><li><a href=#relate-iterative-algorithm-to-fixed-point-theorem aria-label="Relate Iterative Algorithm to Fixed Point Theorem">Relate Iterative Algorithm to Fixed Point Theorem</a><ul><li><a href=#abstraction aria-label=Abstraction>Abstraction</a></li><li><a href=#convergence-%e6%94%b6%e6%95%9b%e5%ad%98%e5%9c%a8%e6%80%a7 aria-label="Convergence æ”¶æ•›å­˜åœ¨æ€§">Convergence æ”¶æ•›å­˜åœ¨æ€§</a></li><li><a href=#performance-analysis-%e6%80%a7%e8%83%bd%e5%88%86%e6%9e%90 aria-label="Performance Analysis æ€§èƒ½åˆ†æ">Performance Analysis æ€§èƒ½åˆ†æ</a></li></ul></li><li><a href=#%e9%87%8d%e8%a6%81may---must-analysis-a-lattice-view aria-label="ï¼ˆé‡è¦ï¼‰May /  Must Analysis, a lattice View">ï¼ˆé‡è¦ï¼‰May / Must Analysis, a lattice View</a><ul><li><a href=#%e5%9b%be%e4%be%8b aria-label=å›¾ä¾‹>å›¾ä¾‹</a></li></ul></li><li><a href=#how-precise-is-our-solution aria-label="How Precise is our Solution?">How Precise is our Solution?</a><ul><li><a href=#meet-over-all-paths-solution-mop aria-label="Meet-Over-All-Paths Solution (MOP)">Meet-Over-All-Paths Solution (MOP)</a></li><li><a href=#mop-vs-iterative%e4%bb%a5may-analysis-%e4%b8%ba%e4%be%8b aria-label="MOP vs. Iterative:ä»¥may analysis ä¸ºä¾‹">MOP vs. Iterative:ä»¥may analysis ä¸ºä¾‹</a></li></ul></li><li><a href=#worklist-algorithm aria-label="Worklist Algorithm">Worklist Algorithm</a><ul><li><a href=#algorithm-forward-analysis-as-an-example aria-label="Algorithm: Forward Analysis as An Example">Algorithm: Forward Analysis as An Example</a></li><li><a href=#%e5%a4%8d%e4%b9%a0%e8%a6%81%e7%82%b9 aria-label=å¤ä¹ è¦ç‚¹>å¤ä¹ è¦ç‚¹</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h1 id=data-flow-analysis-foundations>Data Flow Analysis: Foundations<a hidden class=anchor aria-hidden=true href=#data-flow-analysis-foundations>#</a></h1><p>åœ¨åº”ç”¨ç¯‡çš„æ‰€æœ‰ç®—æ³•ï¼Œéƒ½å¯ä»¥çœ‹ä½œæ˜¯ Iterative Algorithm</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä»å½¢å¼åŒ– Formalçš„è§’åº¦æ¥å®¡è§†è¿™äº›ç®—æ³•ï¼š</p><h3 id=a-functional-view-of-iterative-algorithm>A Functional View of Iterative Algorithm<a hidden class=anchor aria-hidden=true href=#a-functional-view-of-iterative-algorithm>#</a></h3><ul><li><p>(<strong>Define</strong>)Given a CFG i.e.: a program with k nodes, the iterative algorithm updates $OUT[n]$ for every node n in each iteration.</p></li><li><p>(<strong>Domain</strong>)Assume the <strong>domain</strong> of the values in data flow analysis is $V$, then we can define a K-tuple</p><p>$$
(OUT[n_1],OUT[n_2],&mldr;,OUT[n_k])
$$</p><p>as an element of set $(V_1 \times V_2 \times &mldr; \times V_k)$ denoted as $V^k$, to hold the values of the analysis after <strong>each iteration</strong>.</p></li><li><p>(<strong>Action</strong>)<strong>Each iteration</strong> can be considered as taking an action to map an element of $V^k$ to a new element of $V^k$, through applying the transfer functions and control-flow handling, abstracted as a function $F: V^k \to V^k$</p></li><li><p>(<strong>Convergence</strong>)Then the algorithm outputs a series of k-tuples iteratively util a k-tuple is the same as the last one in 2 consecutive iterations.</p></li></ul><h3 id=é—®é¢˜>é—®é¢˜<a hidden class=anchor aria-hidden=true href=#é—®é¢˜>#</a></h3><ul><li>ç®—æ³•ä¸€å®šä¼šæ”¶æ•›åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿæˆ–è€…è¯´ç®—æ³•èƒ½å¾—åˆ°ä¸€ä¸ªè§£å—ï¼Ÿ</li><li>è‹¥èƒ½æ”¶æ•›ï¼Œé‚£ä¹ˆä¸åŠ¨ç‚¹å”¯ä¸€å—ï¼Ÿå¦‚æœå¤šäºä¸€ä¸ªï¼Œé‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°æœ€ä¼˜è§£ï¼Ÿ</li><li>ç®—æ³•ä½•æ—¶å¯ä»¥æ”¶æ•›åˆ°ä¸åŠ¨ç‚¹ï¼Ÿæˆ‘ä»¬ä½•æ—¶å¯ä»¥å¾—åˆ°ä¸€ä¸ªè§£ï¼Ÿ</li></ul><h2 id=æ•°å­¦åŸºç¡€1-maths-basis-i>æ•°å­¦åŸºç¡€1 Maths Basis I<a hidden class=anchor aria-hidden=true href=#æ•°å­¦åŸºç¡€1-maths-basis-i>#</a></h2><h3 id=partial-order-ååº>Partial Order ååº<a hidden class=anchor aria-hidden=true href=#partial-order-ååº>#</a></h3><p>We define <strong>poset</strong> as a pair$(P,\sqsubseteq )$ where $\sqsubseteq$ is a <strong>binary relation</strong> that defines a partial ordering over $P$, and $\sqsubseteq$ has following properties:</p><ol><li><strong>Reflexivity</strong> è‡ªåæ€§ï¼Œ$\forall x \in P, x \sqsubseteq x$</li><li><strong>Antisymmetry</strong> åè‡ªåæ€§ï¼Œ$\forall x,y \in P,x \sqsubseteq y \wedge y\sqsubseteq x \Rightarrow x=y$</li><li><strong>Transitivity</strong> ä¼ é€’æ€§ï¼Œ$\forall x,y,z \in P,x \sqsubseteq y \wedge y\sqsubseteq z \Rightarrow x \sqsubseteq z$</li></ol><p><strong>ä¾‹</strong>ï¼šA $(S,\sqsubseteq$) is a <strong>poset</strong> where $S$ is the <strong>power set</strong>(å¹‚é›†) of set $\{a,b,c\}$ and $\sqsubseteq$ represents $\subseteq$(subset).</p><p>æ³¨ï¼šè¿™ä¸ªä¾‹å­è¿˜ååº”äº†posetå…ƒç´ çš„ä¸€ä¸ªåŸåˆ™ï¼Œè¦ä¹ˆ $a \sqsubseteq b$ï¼Œè¦ä¹ˆ$b \sqsubseteq a$ï¼Œè¦ä¹ˆbä¸aæ˜¯ä¸å¯æ¯”è¾ƒï¼ˆincomparableï¼Œå¦‚å³å›¾æ²¡æœ‰ç®­å¤´è¿æ¥çš„é›†åˆï¼‰çš„ï¼Œä¸å­˜åœ¨éª‘å¢™è€…ã€‚</p><h3 id=upper-and-lower-bounds-ä¸Šç•Œä¸ä¸‹ç•Œ>Upper and Lower Bounds ä¸Šç•Œä¸ä¸‹ç•Œ<a hidden class=anchor aria-hidden=true href=#upper-and-lower-bounds-ä¸Šç•Œä¸ä¸‹ç•Œ>#</a></h3><p><strong>Definition:</strong></p><p>Given a poset $(P,\sqsubseteq)$ and its subset $S$ that $S \subseteq P$, we say that $u \in P$ is an <em><strong>upper bound</strong></em> of <strong>$S$</strong>, if $\forall x \in S, x \sqsubseteq u$.</p><p>æ³¨1ï¼šä»¥ä¸Šå®šä¹‰ç”¨é™¤äº†ä¸Šç•Œå…ƒç´ ä»¥å¤–çš„å­é›†å®šä¹‰ä¸Šç•Œï¼Œå›æƒ³ä¸€ä¸‹å‡½æ•°æå€¼ç‚¹çš„å®šä¹‰ã€‚</p><p>æ³¨2ï¼š$x \sqsubseteq u \Leftrightarrow x \leftarrow u$ ï¼Œä¸” $u \in P, x \in S$</p><p>Similarly, $l \in P$ is a <em><strong>lower bound</strong></em> of <em><strong>$S$,</strong></em> if $\forall x \in S, l \sqsubseteq x$.</p><img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled.png alt=Untitled style=zoom:50%><p><strong>ä¾‹å­</strong>ï¼šæ±‚å­é›†$S$çš„ä¸Šç•Œä¸ä¸‹ç•Œ</p><ul><li><strong>ç­”æ¡ˆï¼š</strong></li></ul><p>upper bound: $\{a,b,c \}$</p><p>lower bound: $\{ \}$</p><img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled%201.png alt=Untitled style=zoom:50%><p><em><strong>Least upper bound ä¸Šç¡®ç•Œ</strong></em> (also called LUB or join ) of $S$, written $\sqcup S$,</p><p>if for every upper bound of $S$, say $u$, $\sqcup S \sqsubseteq u$</p><p><em><strong>Greatest lower bound ä¸‹ç¡®ç•Œ</strong></em> (GLB or meet) of $S$, written $\sqcap S$,</p><p>if for every lower bound of $S$, say $u$, $\sqcap S \sqsubseteq u$</p><p>æ³¨ï¼šä¸Šä¸‹ç•Œæ˜¯ä¸€ä¸ªé›†åˆï¼Œè€Œä¸Šä¸‹ç¡®ç•Œæ˜¯å•ä¸ªå…ƒç´ </p><p>**ä¾‹å­ï¼š**æ±‚å­é›†$S$çš„ä¸Šç¡®ç•Œä¸ä¸‹ç¡®ç•Œ</p><ul><li><p><strong>ç­”æ¡ˆï¼š</strong></p><p>$S$çš„<strong>ä¸Šç•Œ</strong>ï¼š$\{ \{a,b,c\}, \{a,b\}\}$</p><p>é‚£ä¹ˆ$S$çš„<strong>ä¸Šç¡®ç•Œ</strong>ï¼š$\{a,b\}$</p><p>Sçš„<strong>ä¸‹ç•Œ</strong>ï¼š$\{ \{\}\}$</p><p>Sçš„<strong>ä¸‹ç¡®ç•Œ</strong>ï¼š$\{\}$</p></li></ul><img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled%202.png alt=Untitled style=zoom:50%><p><em><strong>Special Cases ç‰¹æ®Šæƒ…å†µ</strong></em></p><p>Usually, if $S$ contains only two elements $a$ and $b$ ($S={a,b}$), then</p><p>$\color{red}\sqcup S$ can be written in $\color{red}a \sqcup b$ ( <strong>join</strong> of $a$ and $b$)</p><p>$\color{blue}\sqcap S$ can be written in $\color{blue}a \sqcap b$ ( meet of $a$ and $b$)</p><p>æ³¨ï¼šç•¥å¾®æŠ½è±¡ï¼Œç»“åˆä¸Šé¢çš„ä¾‹å­è¿›è¡Œç†è§£ã€‚</p><p><em><strong>Properties of bounds ç•Œçš„æ€§è´¨</strong></em></p><ul><li><p><del>ä¸æ˜¯æ‰€æœ‰çš„ç‰›å¥¶éƒ½å«ç‰¹ä»‘è‹</del>ï¼Œä¸æ˜¯æ‰€æœ‰çš„posetéƒ½æœ‰ LUB æˆ– GLB
<img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled%203.png alt=Untitled style=zoom:50%>
<strong>å”¯ä¸€æ€§ï¼š</strong></p></li><li><p>è‹¥ä¸€ä¸ªposetçš„å­é›†$S$å­˜åœ¨LUBæˆ–GLBï¼Œé‚£ä¹ˆè¿™ä¸ªå­é›†çš„LUBå’ŒGLBå°†æ˜¯<strong>å”¯ä¸€çš„</strong></p><ul><li><p>ã€è¯æ˜ã€‘</p><p>åè¯æ³•ï¼š</p><p>è¦è¯æ˜ç»“è®ºï¼Œä¸å¦¨å‡è®¾ååºé›†$(Pï¼Œ\sqsubseteq)$çš„å­é›†æ˜¯$S$ s.t. $S$å­˜åœ¨ GLB</p><p>ä¸”æ»¡è¶³å­˜åœ¨ä¸¤ä¸ªç›¸å¼‚çš„GLB $g_1$ å’Œ $g_2$ã€‚</p><p>ç”±äº $g_1$ , $g_2$ $\in S$ï¼Œå› æ­¤ï¼Œç”± GLBçš„å®šä¹‰å¯çŸ¥ï¼š$g_1 \sqsubseteq g_2$ ä¸” $g_2 \sqsubseteq g_1$ã€‚</p><p>è€Œæ ¹æ®posetçš„<strong>Antisymmetry</strong>æ€§è´¨å¯çŸ¥ï¼š$\forall x,y \in P,x \sqsubseteq y \wedge y\sqsubseteq x \Rightarrow x=y$</p><p>è€Œ$g_1$ å’Œ $g_2$ç›¸å¼‚ï¼Œè¿™ä¸<strong>Antisymmetry</strong>æ€§è´¨çŸ›ç›¾ã€‚</p><p>äºæ˜¯ï¼ŒGLBæ˜¯å”¯ä¸€çš„ã€‚</p><p>åŒç†å¯è¯ï¼ŒLUBä¹Ÿæ˜¯å”¯ä¸€çš„ã€‚</p><p>$\blacksquare$</p></li></ul></li></ul><h3 id=lattice-æ ¼>Lattice æ ¼<a hidden class=anchor aria-hidden=true href=#lattice-æ ¼>#</a></h3><p><strong>Definition:</strong></p><p>Given a poset $(P,\sqsubseteq)$, $\forall a, b \in P$, if $a \sqcup b$ and $a\sqcap b$ exist, then $(P,\sqsubseteq)$ is called a lattice.</p><p><strong>Intuition:</strong></p><p>A poset is a <em><strong>lattice</strong></em> if <strong>every pair</strong> of its elements has a LUB and a GLB.</p><p>ä¾‹1ï¼š$(S,\sqsubseteq)$ is a <strong>lattice</strong> where $S$ is a set of integers and $\sqsubseteq$ represents $\le$.</p><p>â­• The $\sqcup$ equals to $max\{a,b\}$</p><p>The $\sqcap$ equals to $min\{a,b\}$</p><p>ä¾‹2ï¼š$(S,\sqsubseteq)$ is <strong>not</strong> a <strong>lattice</strong> where $S$ is a set of strings , $\sqsubseteq$ stand for the substring relation.</p><p>âŒâ€œpinâ€ $\sqcup$ â€œsinâ€ does not exists.
<img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled%204.png alt=Untitled style=zoom:50%></p><p>ä¾‹3ï¼šA $(S,\sqsubseteq$) is a <strong>lattice</strong> where $S$ is the <strong>power set</strong>(å¹‚é›†) of set $\{a,b,c\}$ and $\sqsubseteq$ represents $\subseteq$(subset).</p><p>â­• The $\sqcup$ equals to $\cup$</p><p>The $\sqcap$ equals to $\cap$
<img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled.png alt=Untitled style=zoom:50%></p><h3 id=semi-lattice-åŠæ ¼>Semi-lattice åŠæ ¼<a hidden class=anchor aria-hidden=true href=#semi-lattice-åŠæ ¼>#</a></h3><p><strong>Definition:</strong></p><p>Given a poset $(P,\sqsubseteq)$, $\forall a, b \in P$,</p><p>if only exists $a \sqcup b$, it is called <strong>join semi-lattice.</strong></p><p>if only exists $a\sqcap b$, it is called <strong>meet semi-lattice</strong>.</p><h3 id=complete-lattice>*Complete lattice<a hidden class=anchor aria-hidden=true href=#complete-lattice>#</a></h3><p><strong>Definition:</strong></p><p>Given a lattice $(P,\sqsubseteq)$ , for arbitrary subset of $S$ of $P$, if $\sqcup S$ and $\sqcap S$ exists, then $(P,\sqsubseteq)$ is called a <strong>complete lattice</strong>.</p><p><strong>Intuition:</strong></p><p><strong>All subsets</strong> of a lattice have a LUB and GLB</p><p>ä¾‹1ï¼š$(S,\sqsubseteq)$ is <strong>not</strong> a <strong>complete</strong> <strong>lattice</strong> where $S$ is a set of integers and $\sqsubseteq$ represents $\le$.</p><p>âŒ For a subset $S^+$ including all positive integers, it has no $\sqcup S^+ (+\infin)$</p><p>*ä¾‹2ï¼šA $(S,\sqsubseteq$) is a <strong>complete</strong> <strong>lattice</strong> where $S$ is the <strong>power set</strong>(å¹‚é›†) of set $\{a,b,c\}$ and $\sqsubseteq$ represents $\subseteq$(subset).</p><p>â­• The $\sqcup$ equals to $\cup$</p><p>The $\sqcap$ equals to $\cap$
<img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled.png alt=Untitled style=zoom:50%>
<strong>Properties:</strong></p><ul><li><p>Every <strong>complete lattice $(P,\sqsubseteq)$</strong> has:</p><ul><li>a greatest element $\top = \sqcup P$ called top.</li><li>a least element $\bot = \sqcap P$ called bottom.</li></ul></li><li><p>Every <strong>finite</strong> lattice (P is finite) is a complete lattice. æœ‰ç©·æ ¼ä¸€å®šæ˜¯å®Œå…¨æ ¼.</p></li><li><p>A complete lattice is not bound to be a <strong>finite lattice</strong> å®Œå…¨æ ¼ä¸ä¸€å®šæ˜¯æœ‰ç©·é›†åˆ</p><ul><li>e.g. : $\{ x\in R\ |\ 0\le x \le1\}$ is a complete lattice with infinite numbers of elements</li></ul></li></ul><h3 id=product-lattice>Product Lattice<a hidden class=anchor aria-hidden=true href=#product-lattice>#</a></h3><blockquote><p><strong>Recall Cartesian product å¤ä¹ ä¸€ä¸‹ç¬›å¡å°”ç§¯:</strong>
e.g. Given set $A=\{a,b\}$ and $B=\{1,2,3\} $,
$A \times B = \{(a,1),(a,2),(a,3),(b,1),(b,2),(b,3)\}$</p></blockquote><p><strong>Definition:</strong></p><p>Given lattices $L_1 = (P_1, \sqsubseteq_1)$, $L_2 = (P_2, \sqsubseteq_2)$, &mldr; , $L_n = (P_n, \sqsubseteq_n)$,</p><p>if $\forall i$, $(P_n, \sqsubseteq_n)$ has $\sqcup_i$ (least upper bound) and $\sqcap_i$ (greatest lower bound), then</p><p>we can have a <strong>product lattice</strong> $L^n = (P, \sqsubseteq)$ that is defined by:</p><ul><li>$P = P_1 \times P_2 \times &mldr; \times P_n$</li><li>$(x_1, &mldr; , x_n) \sqsubseteq (y_1, &mldr;, y_n) \Leftrightarrow (x_1 \sqsubseteq y_1) \wedge (x_2 \sqsubseteq y_2) \wedge &mldr; \wedge (x_n \sqsubseteq y_n)$<ul><li>æ³¨ï¼šå³è¾¹å³åŒæ—¶æ»¡è¶³è¿™äº›å…³ç³»</li></ul></li><li>$(x_1, &mldr; , x_n) \sqcup (y_1 , &mldr;, y_n) =(x_1 \sqcup y_1 ,&mldr;,x_n \sqcup y_n)$</li><li>$(x_1, &mldr; , x_n) \sqcap (y_1 , &mldr;, y_n) =(x_1 \sqcap y_1 ,&mldr;,x_n \sqcap y_n)$</li></ul><p><strong>Properties:</strong></p><ul><li><p>A product lattice is a lattice.</p><p>æ³¨ï¼šæœ¬èº«æ€§è´¨ä¸å˜ï¼Œä»æ˜¯æ ¼</p></li><li><p>If a product lattice $L^n$ is a product of <strong>complete (and finite) lattices</strong>, then $L^n$ is also <strong>complete (and finite)</strong>.</p><p>æ³¨ï¼šä½œç§¯ï¼Œå®Œå…¨æ€§ä¸æœ‰é™æ€§ä¸å˜</p></li></ul><hr><h2 id=data-flow-analysis-framework-via-lattice>Data Flow Analysis Framework via Lattice<a hidden class=anchor aria-hidden=true href=#data-flow-analysis-framework-via-lattice>#</a></h2><p><strong>ä»¥æ ¼ä¸ºåŸºç¡€çš„æ•°æ®æµåˆ†ææ¡†æ¶</strong></p><h3 id=framework-in-a-formal-meaning>Framework in a formal meaning<a hidden class=anchor aria-hidden=true href=#framework-in-a-formal-meaning>#</a></h3><p>A data flow analysis framework $\color{black}(\color{red}D,\color{green}L,\color{blue}F \color{black})$ consists of:</p><ul><li>$\color{red}D$: a <strong>direction</strong> of data flow: forwards or backwards</li><li>$\color{green}L$: a <strong>lattice</strong> including domain of the values $V$ and a meet $\sqcap$ or join $\sqcup$ operator</li><li>$\color{blue} F$: a family of <strong>transfer functions</strong> i.e. $f: V â†’ V$</li></ul><p>Data flow analysis can be seen as iteratively applying <strong>transfer functions</strong> and <strong>meet/join operations</strong> on the value of a <strong>lattice.</strong></p><p>æ¥ä¸‹æ¥ï¼Œå°±è¦å›ç­”å¼€ç¯‡çš„é—®é¢˜</p><blockquote><p>ç®—æ³•ä¸€å®šä¼šæ”¶æ•›åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿæˆ–è€…è¯´ç®—æ³•èƒ½å¾—åˆ°ä¸€ä¸ªè§£å—ï¼Ÿ
è‹¥èƒ½æ”¶æ•›ï¼Œé‚£ä¹ˆä¸åŠ¨ç‚¹å”¯ä¸€å—ï¼Ÿå¦‚æœå¤šäºä¸€ä¸ªï¼Œé‚£ä¹ˆå¦‚ä½•æ‰¾åˆ°æœ€ä¼˜è§£ï¼Ÿ
ç®—æ³•ä½•æ—¶å¯ä»¥æ”¶æ•›åˆ°ä¸åŠ¨ç‚¹ï¼Ÿæˆ‘ä»¬ä½•æ—¶å¯ä»¥å¾—åˆ°ä¸€ä¸ªè§£ï¼Ÿ</p></blockquote><h3 id=ç®—æ³•ä¸€å®šå¯ä»¥è¾¾åˆ°ä¸åŠ¨ç‚¹å—>ç®—æ³•ä¸€å®šå¯ä»¥è¾¾åˆ°ä¸åŠ¨ç‚¹å—ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ç®—æ³•ä¸€å®šå¯ä»¥è¾¾åˆ°ä¸åŠ¨ç‚¹å—>#</a></h3><p>å¤ä¹ ä¸€ä¸‹ï¼Œåº”ç”¨ç¯‡å…³äº<a href=https://www.notion.so/Data-Flow-Analysis-Applications-7435efbbd0114affbcc9788fc437fe43>å‡½æ•°å•è°ƒæ€§</a>çš„ç†è§£ã€‚</p><h3 id=æˆ‘ä»¬ä¸åŠ¨ç‚¹æ˜¯æ‰€æœ‰ä¸åŠ¨ç‚¹ä¸­æœ€å¥½çš„å—åˆå¦‚ä½•å®šä¹‰æœ€å¥½>æˆ‘ä»¬ä¸åŠ¨ç‚¹æ˜¯æ‰€æœ‰ä¸åŠ¨ç‚¹ä¸­æœ€å¥½çš„å—ï¼Ÿåˆå¦‚ä½•å®šä¹‰â€œæœ€å¥½â€ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#æˆ‘ä»¬ä¸åŠ¨ç‚¹æ˜¯æ‰€æœ‰ä¸åŠ¨ç‚¹ä¸­æœ€å¥½çš„å—åˆå¦‚ä½•å®šä¹‰æœ€å¥½>#</a></h3><hr><h2 id=æ•°å­¦åŸºç¡€2-math-basis-ii>æ•°å­¦åŸºç¡€2 Math Basis II<a hidden class=anchor aria-hidden=true href=#æ•°å­¦åŸºç¡€2-math-basis-ii>#</a></h2><h3 id=monotonicity-å•è°ƒæ€§>Monotonicity å•è°ƒæ€§<a hidden class=anchor aria-hidden=true href=#monotonicity-å•è°ƒæ€§>#</a></h3><p><strong>definition:</strong></p><p>A function $f$: $L\rightarrow L$ ( $L$ is a lattice) is <strong>monotonic</strong> if $\forall x, y \in L, x \sqsubseteq y \Rightarrow f(x) \sqsubseteq f(y)$</p><h3 id=fixed-point-theorem-ä¸åŠ¨ç‚¹å®šç†>Fixed-Point Theorem ä¸åŠ¨ç‚¹å®šç†<a hidden class=anchor aria-hidden=true href=#fixed-point-theorem-ä¸åŠ¨ç‚¹å®šç†>#</a></h3><p>Given a <strong>complete lattice</strong> $(L, \sqsubseteq)$, if</p><ol><li>$f: L \rightarrow L$ is monotonic and</li><li>$L$ is finite, then</li></ol><p>the least fixed point of f can be found by iterating</p><p>$f(\bot), f(f(\bot)), &mldr;, f^k(\bot)$ until a fixed point is reached.</p><ol><li><strong>å­˜åœ¨æ€§</strong> 2. <strong>æœ€å°æ€§</strong>*</li></ol><p>æ³¨1ï¼šå›å¿†å•è°ƒæœ‰ç•Œå‡†åˆ™</p><p>æ³¨2ï¼šè¿™é‡Œçš„<strong>æœ€å°æ€§</strong>æ˜¯ç›¸å¯¹äº</p><ol><li><p><strong>èµ·å§‹ç‚¹ä¸º$\bot$</strong></p></li><li><p>å…³äº$f$ è¿­ä»£çš„â€œç›®æ ‡â€ä¸ºMayï¼ˆæ³¨æ„å’ŒForward å’Œ Backward <strong>æ— å…³</strong>ï¼‰</p></li></ol><p>çš„æƒ…å†µè€Œè¨€ï¼ˆå›å¿†Mayå’ŒMustçš„åŒºåˆ«ï¼‰ï¼Œ</p><p>å› æ­¤è¿™é‡Œå«åš**æœ€è¿‘æ€§ï¼ˆç¦»èµ·å§‹ç‚¹æœ€è¿‘çš„æ”¶æ•›ç‚¹ï¼‰**æ›´å¥½ã€‚</p><ul><li><p>æ¥ä¸‹æ¥ï¼Œè¯æ˜è¿™ä¸ªå®šç†ã€‚</p><p>ã€è¯æ˜ã€‘</p><p>å…ˆè¯<strong>å­˜åœ¨æ€§</strong>ï¼š</p><p>æ ¹æ®$\bot$å’Œ$f$çš„å®šä¹‰ï¼Œæˆ‘ä»¬æœ‰ï¼š</p><p>$$
\bot \sqsubseteq f(\bot)
$$</p><p>åˆç”±äº $f$æ˜¯å•è°ƒçš„ï¼Œæˆ‘ä»¬æœ‰ï¼š</p><p>$$
f(\bot) \sqsubseteq f( f(\bot)) = f^2(\bot)
$$</p><p>åŒæ ·åœ°ï¼Œä¸åœåœ°é‡å¤è¿­ä»£åº”ç”¨ $f$ï¼Œæˆ‘ä»¬æœ‰ï¼š</p><p>$$
\bot \sqsubseteq f(\bot) \sqsubseteq f^2(\bot)\sqsubseteq f^3(\bot)\sqsubseteq &mldr;\sqsubseteq f^n(\bot)
$$</p><p>åˆç”±äº $L$æ˜¯æœ‰é™é›†åˆï¼Œå¹¶ä¸”</p><p>$$
f(\top) =\top
$$</p><p>å› æ­¤ï¼Œ$\exists k>0\ \ s.t.$</p><p>$$
f^{Fix}=f^k(\bot)=f^{k+1} (\bot)
$$</p><p>å› æ­¤ï¼Œä¸åŠ¨ç‚¹å­˜åœ¨ã€‚</p><p>$\blacksquare$</p><p>å†è¯æ˜<strong>æœ€å°ä¸åŠ¨ç‚¹</strong>ï¼Œåè¯æ³•ï¼š</p><p>å‡è®¾åœ¨ä¸åŠ¨ç‚¹$f^k(\bot)$çš„åŸºç¡€ä¸Šï¼Œè¿˜æœ‰ä¸€ä¸ªä¸åŠ¨ç‚¹ $x$ i.e $x = f(x)$</p><p>æ ¹æ® $\bot$ çš„å®šä¹‰æœ‰ï¼š $\bot \sqsubseteq x$</p><p>æ•°å­¦å½’çº³æ³•ï¼š</p><ul><li>èµ·å§‹æ¡ä»¶ï¼šå› ä¸º$f$æ˜¯å•è°ƒçš„ï¼Œæˆ‘ä»¬æœ‰ï¼š</li></ul><p>$$
f(\bot) \sqsubseteq f(x)
$$</p><ul><li>å‡è®¾ $f^i(\bot) \sqsubseteq f^i(x)$ æˆç«‹</li><li>ç”±äº$f$å•è°ƒï¼Œäºæ˜¯$f^{i+1}(\bot) \sqsubseteq f^{i+1}(x)$</li></ul><p>äºæ˜¯ç”±æ•°å­¦å½’çº³æ³•å¯çŸ¥</p><p>$$
f^i(\bot) \sqsubseteq f^i(x)
$$</p><p>å› æ­¤ï¼Œå½“$f^k(\bot) \sqsubseteq f^k(x) = x$ æ—¶ï¼Œæˆ‘ä»¬æœ‰</p><p>$$
f^{Fix} = f^k(\bot) \sqsubseteq x
$$</p><p>å› æ­¤ï¼Œä¸åŠ¨ç‚¹æ˜¯æœ€å°çš„ã€‚</p><p>$\blacksquare$</p></li></ul><p>Now what we have just seen is the property (fixed point theorem) for the <strong>function on a lattice.</strong></p><p>We cannot say our iterative algorithm also has that property unless we can <strong>relate</strong> the algorithm to the fixed point theorem, if possible.</p><p>è¦å°†æˆ‘ä»¬çš„ç®—æ³•å°†ä¸åŠ¨ç‚¹å®šç†å…³è”ä¸Šã€‚</p><hr><h2 id=relate-iterative-algorithm-to-fixed-point-theorem>Relate Iterative Algorithm to Fixed Point Theorem<a hidden class=anchor aria-hidden=true href=#relate-iterative-algorithm-to-fixed-point-theorem>#</a></h2><h3 id=abstraction>Abstraction<a hidden class=anchor aria-hidden=true href=#abstraction>#</a></h3><p>Consider the k-tuple in Iterative Algorithm as a <strong>Product Lattice $L$</strong></p><p>å°†ç®—æ³•ä¸­çš„ kå…ƒç»„ï¼ˆBit Vectorï¼‰æŠ½è±¡ä¸ºProduct Lattice.</p><p>$$
L=(P,\sqsubseteq)\
P=(P_1, P_2,&mldr;,P_n)
$$</p><p>å°†ä¸€ä¸ªä¸€æ¬¡iterationçš„è¿‡ç¨‹æŠ½è±¡ä¸ºå‡½æ•°$f:L\to L$</p><p>è€Œæ•´ä¸ªæŠ½è±¡çš„è¿‡ç¨‹å¯ä»¥çœ‹ä½œå¤åˆå‡½æ•°$f^k$</p><p>ç”±äºDomainæ˜¯Product Latticeï¼Œæˆ‘ä»¬çš„æ ¹æ®å…¶å®šä¹‰ä»¥åŠç®—æ³•çš„è¡Œä¸ºï¼Œæœ‰ä»¥ä¸‹æ´è§ï¼š</p><ol><li><p><strong>Transfer Function:</strong> $f_i: L \to L$</p></li><li><p><strong>Join/Meet Function</strong> $\sqcap /\sqcup: L \times L \to L$ ï¼ˆæ³¨æ„è¿™é‡Œçš„$\times$å±äºæŸå¤±ä¸¥è°¨æ€§çš„ç¬¦å·æ»¥ç”¨ï¼‰</p><p>i.e. $(x_1, &mldr; , x_n) \sqcup (y_1 , &mldr;, y_n) =(x_1 \sqcup y_1 ,&mldr;,x_n \sqcup y_n)$
<img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/%E6%88%AA%E5%B1%8F2022-01-09_%E4%B8%8B%E5%8D%8812.39.36.png alt="æˆªå±2022-01-09 ä¸‹åˆ12.39.36.png" style=zoom:50%></p></li></ol><h3 id=convergence-æ”¶æ•›å­˜åœ¨æ€§>Convergence æ”¶æ•›å­˜åœ¨æ€§<a hidden class=anchor aria-hidden=true href=#convergence-æ”¶æ•›å­˜åœ¨æ€§>#</a></h3><blockquote><p>ä¸åŠ¨ç‚¹å®šç†ï¼š
Given a <strong>complete lattice</strong> $(L, \sqsubseteq)$, if $f: L \rightarrow L$ is monotonic and $L$ is finite, then least fixed point of f can be found by iterating.</p></blockquote><ul><li><p><strong>Finite æœ‰ç•Œ</strong></p><p>ç”±äº Product Latticeçš„æ€§è´¨ï¼š</p><blockquote><p>If a product lattice $L_p$ is a product of complete (and finite) lattices, i.e., $(L, L, &mldr;, L)$, then $L_p$ is also complete (and finite)</p></blockquote><p>å› æ­¤ï¼Œåªè¦æˆ‘ä»¬å·§å¦™åœ°æ„é€ $L$ï¼Œä½¿å¾—$L$æœ¬èº«æ˜¯Complete Latticeå¹¶ä¸”æ˜¯Finiteå³å¯ã€‚</p></li><li><p><strong>Monotonic å•è°ƒ</strong></p><p>è®¨è®º $f:L\to L$:</p><p>ç”±äº$f$çš„æ“ä½œä¸ºï¼š</p><ol><li><p>transfer function:</p><p>ç”±äº$gen_B$å’Œ$kill_B$ä¸ºå¸¸æ•°ï¼Œå®¹æ˜“è¯æ˜å…¶å•è°ƒæ€§ã€‚</p></li><li><p>join / meet function$\sqcup / \sqcap$:</p></li></ol><ul><li><p>æˆ‘ä»¬è¯æ˜ 2.çš„å•è°ƒæ€§</p><p>ä¸å¦¨è¯æ˜ $\sqcup$çš„å•è°ƒæ€§ï¼š</p><p>é—®é¢˜ï¼šè‹¥ $\forall x,y,z \in L, x \sqsubseteq y$ , è¯æ˜ $x \sqcup y \sqsubseteq y \sqcup z$</p><p>ã€è¯æ˜ã€‘</p><p>æ ¹æ® $\sqcup$çš„å®šä¹‰ï¼Œæœ‰ $y \sqsubseteq y \sqcup z$</p><p>åˆç”±äº $x \sqsubseteq x \sqcup y$ ä¸” $x \sqsubseteq y$</p><p>äºæ˜¯æœ‰ $x \sqsubseteq y = y$</p><p>å› æ­¤ï¼Œ$x \sqcup y \sqsubseteq y \sqcup z$</p><p>åŒç†å¯è¯ $\sqcap$ ä¹Ÿæ˜¯å•è°ƒçš„</p><p>$\blacksquare$</p></li></ul></li></ul><p>äºæ˜¯ï¼Œæˆ‘ä»¬è§£å†³äº†å‰ä¸¤ä¸ªé—®é¢˜ï¼Œå³ç®—æ³•æ”¶æ•›æ€§ä¸æ”¶æ•›ç‚¹å”¯ä¸€æ€§ã€‚</p><p>ï¼ˆä¸åŠ¨ç‚¹å®šç†å¯ä»¥ä¸€æ¬¡å›ç­”å‰ä¸¤ä¸ªé—®é¢˜ï¼‰</p><h3 id=performance-analysis-æ€§èƒ½åˆ†æ>Performance Analysis æ€§èƒ½åˆ†æ<a hidden class=anchor aria-hidden=true href=#performance-analysis-æ€§èƒ½åˆ†æ>#</a></h3><p>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œç®—æ³•ä½•æ—¶æ”¶æ•›ï¼Œå³ç®—æ³•çš„å¤æ‚åº¦å¦‚ä½•ï¼Ÿ</p><p>æˆ‘ä»¬æ‹¿å‰é¢<strong>å¹‚é›†</strong>çš„å›¾ä¸¾ä¾‹ï¼š</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œè¿™æ˜¯ä¸€ä¸ªLatticeã€‚</p><p>å‡è®¾$\top = \{a,b,c\} , \bot = \{\}$</p><p>æˆ‘ä»¬å®šä¹‰ï¼šæ ¼çš„é«˜åº¦ $h$$\top$ åˆ° $\bot$ çš„<strong>æœ€å¤šçš„è¾¹æ•°ï¼Œæˆ–è€…è¯´ï¼Œæœ€é•¿çš„è·¯å¾„</strong></p><p>e.g. å³å›¾çš„ $h = 3$</p><p>å‡è®¾ <strong>Product Lattice</strong> $L_k$ æœ‰ kä¸ªåˆ†é‡</p><p>e.g. $L_k = (L_1, L_2,&mldr;,L_k)$</p><p>è€ƒè™‘ä¸€ç§<strong>æœ€åæƒ…å†µ</strong>ï¼šæ¯ä¸ªè¿­ä»£åªæœ‰**ä¸€ä¸ªåˆ†é‡ï¼ˆæ»¡è¶³Latticeæ€§è´¨ï¼‰**æ›´æ–°ï¼Œä¸”å¯¹äºæ‰€æœ‰åˆ†é‡ï¼Œéƒ½â€œèµ°â€æœ€é•¿çš„è·¯å¾„ã€‚</p><p>å®¹æ˜“å¾—åˆ°ï¼š</p><p>è¯¥ç®—æ³•çš„æœ€åå¤æ‚åº¦ä¸º$O(hk)$ï¼Œå…¶ä¸­$h$æ˜¯æ ¼çš„é«˜åº¦ï¼Œ$k$æ˜¯<strong>Product Lattice</strong>çš„åˆ†é‡æ•°ç›®ã€‚</p><h2 id=hahahugoshortcode-s8-hbhb><img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/Untitled.png alt=Untitled style=zoom:50%></h2><h2 id=é‡è¦may---must-analysis-a-lattice-view>ï¼ˆé‡è¦ï¼‰May / Must Analysis, a lattice View<a hidden class=anchor aria-hidden=true href=#é‡è¦may---must-analysis-a-lattice-view>#</a></h2><p>æˆ‘ä»¬ç°åœ¨å°†ç”¨Latticeç†è®ºè§£é‡ŠMay å’Œ Must AnalysisèƒŒåçš„åŸå› ã€‚ä»ç„¶ç”¨å‡ ä¸ªé—®é¢˜æ¥é¸Ÿç°ä»¥ä¸‹è¿™ä¸ªéƒ¨åˆ†</p><ul><li>ä¸ºä½•May Analysis ä¼šæ‰¾åˆ°æœ€å°ä¸åŠ¨ç‚¹ / ä¸ºä½•Must Analysis ä¼šæ‰¾åˆ°æœ€å¤§ä¸åŠ¨ç‚¹ï¼Ÿ</li><li>ä¸ºä½•Must Analysiså’ŒMay Analysisçš„åˆå§‹åŒ–å„è‡ªæ˜¯é‚£æ ·çš„ï¼Ÿ</li></ul><h3 id=å›¾ä¾‹>å›¾ä¾‹<a hidden class=anchor aria-hidden=true href=#å›¾ä¾‹>#</a></h3><p>âš ï¸é€»è¾‘ç»•å¼¯è­¦å‘Šï¼š</p><p><strong>ä»¥Reaching Definition Analysisä¸ºä¾‹</strong></p><ul><li>é¦–å…ˆå›å¿†ï¼šå®ƒæ˜¯ä¸€ç§May Analysis</li><li>å…¶æ¬¡ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨åˆ†æä¸€ä¸ªç¨‹åºæ‰€æœ‰å¯èƒ½ <code>undefined</code> çš„å˜é‡</li><li>ä»ä¸¤ä¸ª<strong>æç«¯æƒ…å†µ</strong>è®¨è®ºï¼š<ol><li><p>å½“åˆ†æç®—æ³•<strong>åˆå§‹åŒ–</strong>æ—¶ï¼Œæˆ‘ä»¬å°†å…¨éƒ¨çš„Latticeåˆ†é‡åˆå§‹åŒ–ä¸º$\bot$ã€‚</p><p>è¿™è¯´æ˜ï¼šåœ¨èµ·å§‹æ€ï¼Œè®¤ä¸ºæ‰€æœ‰çš„Definitionéƒ½æ˜¯<strong>æ— æ³•åˆ°è¾¾</strong>çš„ï¼Œå³æ‰€æœ‰çš„Definitionåœ¨æ‰€æœ‰ç¨‹åºç‚¹éƒ½**æ— æ•ˆï¼ˆ<code>undefined</code>ï¼‰**äº†ã€‚æˆ‘ä»¬è®¤ä¸ºï¼Œè¿™æ˜¯Unsafeçš„ã€‚</p><p>æ³¨ï¼šè¿™ä¸ªunsafeä¸safeçš„ææ³•ä¼šæœ‰æ­§ä¹‰ï¼Œä½†æ˜¯å½¢å¼é€»è¾‘ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œæš‚ä¸”æŒ‰ç…§è¯¾ç¨‹çš„è§‚ç‚¹èµ°ã€‚</p></li><li><p>å½“åˆ†æç®—æ³•è®¤ä¸ºï¼Œæ‰€æœ‰çš„definition<strong>éƒ½åˆ°è¾¾äº†</strong>ï¼ˆ111&mldr;111ï¼‰ï¼Œæ˜¾ç„¶ï¼Œåˆ†æç¨‹åºä¸ä¼šæŠ¥ <code>warningï¼šxxx variable undefined</code> ã€‚æˆ‘ä»¬è®¤ä¸ºè¿™æ˜¯Safeçš„ã€‚</p></li></ol></li><li>è€Œç®—æ³•çš„<strong>è¿è¡Œè¿‡ç¨‹</strong>å°±æ˜¯ï¼šä¸æ–­æ‰©å¤§Unsafeï¼ˆ<code>undefined</code>ï¼‰çš„èŒƒå›´ï¼ˆç”±äºæ˜¯Monotonicçš„ï¼‰ï¼Œç›´åˆ°ä¸€ä¸ª<strong>æœ€ä¼˜</strong>çš„ç‚¹ï¼ˆFixed-pointï¼‰ã€‚<ul><li>æœ€ä¼˜ï¼š1. ï¼ˆæ­£ç¡®ï¼‰åœ¨é‚£ä¸€ç‚¹ï¼Œä¼šå­˜åœ¨è¯¯æŠ¥<code>undefined</code> æƒ…å†µï¼Œä½†æ˜¯æ‰€æœ‰çœŸæ­£<code>undefined</code> çš„å˜é‡<strong>éƒ½ä¼šåŒ…æ‹¬è¿›æ¥</strong>ã€‚2. ï¼ˆæœ€å¥½ï¼‰åŒ…æ‹¬<strong>è¯¯æŠ¥</strong>çš„<code>undefined</code> çš„èŒƒå›´æœ€å°ã€‚
<img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/%E6%88%AA%E5%B1%8F2022-01-09_%E4%B8%8B%E5%8D%882.43.57.png alt=è¿™å¼ å›¾å¾ˆé‡è¦ï¼Œå»ºè®®æ”¶è—ï¼ï¼ï¼ style=zoom:50%>
è¿™å¼ å›¾å¾ˆé‡è¦ï¼Œå»ºè®®æ”¶è—ï¼ï¼ï¼</li></ul></li></ul><p><strong>ä»¥Available Expression Analysisä¸ºä¾‹</strong></p><ul><li>é¦–å…ˆï¼Œè¿™æ˜¯Must Analysis</li><li>å…¶æ¬¡ï¼Œå‡è®¾æˆ‘ä»¬æ­£åœ¨åˆ†æä¸€ä¸ªç¨‹åºçš„è¡¨è¾¾å¼æ˜¯å¦éœ€è¦åœ¨æŸäº›BBè¿›è¡Œ<strong>é‡å¤è®¡ç®—</strong>ã€‚</li><li>æç«¯æƒ…å†µï¼š<ol><li><p>æ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½availableï¼Œå³ æ‰€æœ‰çš„è¡¨è¾¾å¼<strong>éƒ½ä¸éœ€è¦</strong>é‡å¤è®¡ç®—ï¼Œæˆ‘ä»¬ç§°æ‰€æœ‰è¡¨è¾¾å¼éƒ½Unsafeã€‚</p><p>ï¼ˆç®€è®°ï¼šä¸é‡æ–°è®¡ç®—å¯èƒ½é€ æˆ<strong>ç»“æœé”™è¯¯</strong>ï¼Œæ‰€ä»¥å«Unsafeï¼‰</p></li><li><p>æ²¡æœ‰è¡¨è¾¾å¼éƒ½availableï¼Œå³ æ‰€æœ‰çš„è¡¨è¾¾å¼<strong>éƒ½éœ€è¦</strong>é‡å¤è®¡ç®—ï¼Œå³<strong>æ²¡æœ‰ä¼˜åŒ–å¯èƒ½</strong>ï¼Œæˆ‘ä»¬ç§°æ‰€æœ‰è¡¨è¾¾å¼éƒ½Safeã€‚</p></li></ol></li><li>ç®—æ³•è¿è¡Œè¿‡ç¨‹ï¼šä¸æ–­æ‰©å¤§Safeçš„èŒƒå›´ï¼ˆæ³¨æ„âš ï¸è¿™ä¸€ç‚¹ï¼‰ï¼Œç›´åˆ°æœ€ä¼˜çš„ç‚¹ã€‚<ul><li>æœ€ä¼˜ï¼š1. ï¼ˆæ­£ç¡®ï¼‰æ‰€æœ‰çš„unavailableè¡¨è¾¾å¼éƒ½è¢«åŒ…å«è¿›æ¥ 2. ï¼ˆæœ€å¥½ï¼‰ä¿è¯æœ¬å¯ä»¥<strong>ç¼“å­˜</strong>å´è¢«æ’é™¤çš„è¡¨è¾¾å¼æ•°ç›®æœ€å°‘ã€‚</li></ul></li></ul><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>ä»¥ä¸Šä¸¤ç§åˆ†æç®—æ³•ï¼Œæœ€ç»ˆéƒ½ä½“ç°äº†<strong>Sound</strong>çš„ç»“æœã€‚</li><li>å¯¹äºæœ€å°/å¤§çš„ä¸åŠ¨ç‚¹ï¼Œä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œç”±äºæˆ‘ä»¬è®¾è®¡çš„ç®—æ³•æœ¬èº«æ¯æ¬¡è¿­ä»£çš„æ“ä½œå¤Ÿatomicï¼Œä¹Ÿå°±æ˜¯è¯´æ­¥å­è¿ˆå¾—è¶³å¤Ÿå°ï¼Œäºæ˜¯ä¸åŠ¨ç‚¹æ˜¯æœ€å°/æœ€å¤§çš„ã€‚</li><li>ç”±äºæˆ‘ä»¬transfer functionå’Œ join/meet functionçš„åˆç†è®¾è®¡ï¼Œæ»¡è¶³äº†ä¸åŠ¨ç‚¹è½åœ¨safeåŒºåŸŸçš„æ¡ä»¶</li></ul><hr><h2 id=how-precise-is-our-solution>How Precise is our Solution?<a hidden class=anchor aria-hidden=true href=#how-precise-is-our-solution>#</a></h2><p>æˆ‘ä»¬é€šè¿‡ä»‹ç»ä¸€äº›<strong>ç†æƒ³çš„æ¨¡å‹</strong>ç”¨äºå¯¹æ¯”Iterative Algorithmæ¥è¡¡é‡Precisionã€‚</p><p>ï¼ˆå¯¹æ¯”OSå†…å­˜äº¤æ¢çš„OPTä¸LRUç®—æ³•ï¼Œä»¥åŠCLRSçš„ç«äº‰æ€§åˆ†æï¼‰</p><h3 id=meet-over-all-paths-solution-mop>Meet-Over-All-Paths Solution (MOP)<a hidden class=anchor aria-hidden=true href=#meet-over-all-paths-solution-mop>#</a></h3><ul><li><p>ä»€ä¹ˆæ˜¯MOPï¼Ÿ</p><p>å®šä¹‰è·¯å¾„ $P=entry\to s_1 \to s_2 \to &mldr;\to s_i$</p><p>å¯¹äºè·¯å¾„$P$ï¼Œå®šä¹‰Transfer Function $F_p=f_{s_1}\circ f_{s_2} \circ&mldr;\circ f_{s_i}$</p><p>è€Œ$MOP[s_i]$ï¼Œå³å°†æ‰€æœ‰ä»$entry$ åˆ°$s_i$çš„è·¯å¾„ä¸Šçš„transfer functionçš„è¾“å‡ºï¼Œmeetæˆ–joinèµ·æ¥ï¼Œæ‰¾åˆ°LUBæˆ–GLBï¼Œå½¢å¼åŒ–åœ°æœ‰ï¼š</p><p>$$
MOP[s_i] = \sqcup / \sqcap_{A\ path\ P\ from\ Entry\ to\ S_i }F_p(OUT[Entry])
$$</p></li><li><p>MOPçš„å±€é™æ€§</p><ul><li>çœŸå®ç¨‹åºä¸­ï¼Œå­˜åœ¨CFGä¸­å­˜åœ¨ï¼Œè€ŒåŠ¨æ€ç¨‹åºä¸­ä¸ä¼šåˆ°è¾¾çš„åˆ†æ”¯ã€‚ e.g. <code>condition always true</code></li><li>åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼ŒMOPæ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„æ”¶æ•›ç‚¹ã€‚e.g. æ— é™å¾ªç¯</li></ul></li></ul><h3 id=mop-vs-iterativeä»¥may-analysis-ä¸ºä¾‹>MOP vs. Iterative:ä»¥may analysis ä¸ºä¾‹<a hidden class=anchor aria-hidden=true href=#mop-vs-iterativeä»¥may-analysis-ä¸ºä¾‹>#</a></h3><p>é¦–å…ˆï¼Œåˆ†åˆ«åˆ©ç”¨è¡¨è¾¾å¼æ¦‚æ‹¬MOPè¿‡ç¨‹ä¸Iterative çš„è¿‡ç¨‹
<img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/%E6%88%AA%E5%B1%8F2022-01-09_%E4%B8%8B%E5%8D%884.44.19.png alt="æˆªå±2022-01-09 ä¸‹åˆ4.44.19.png" style=zoom:50%>
å½¢å¼åŒ–åœ°ï¼š</p><p>$$
Iterative=F(x\sqcup y)\
MOP=F(x) \sqcup F(y)
$$</p><p><strong>å®šç†</strong>ï¼šMOPæ¯”æˆ‘ä»¬çš„æ–¹æ³•å¾—åˆ°çš„ä¸åŠ¨ç‚¹æ›´å‡†ç¡®ã€‚</p><p>ã€è¯æ˜ã€‘</p><p>æ ¹æ®$\sqcup$çš„å®šä¹‰æœ‰ $x \sqsubseteq x \sqcup y$ ä»¥åŠ $y \sqsubseteq x \sqcup y$</p><p>ç”±äº$F_P$æ˜¯å•è°ƒçš„ï¼Œå› æ­¤æœ‰ï¼š</p><p>$F(x) \sqsubseteq F(x\sqcup y)$ ä»¥åŠ $F(y) \sqsubseteq F(x\sqcup y)$</p><p>åˆç”±äº</p><p>$F(x) \sqcup F(y) \sqsubseteq F(x)$</p><p>äºæ˜¯ç”±<strong>ä¼ é€’æ€§</strong>ï¼š</p><p>$F(x)\sqcup F(y) \sqsubseteq F(x\sqcup y)\ \ i.e.\ MOP \sqsubseteq Iterative$</p><p>æ ¹æ®ä¸åŠ¨ç‚¹ä¸truthç‚¹çš„ç›¸å¯¹å…³ç³»ï¼Œå¯çŸ¥$MOP$æ¯”$Iterative$<strong>æ›´å‡†ã€‚</strong></p><p>$\blacksquare$</p><p><strong>æ¨è®ºï¼š<strong>å½“ä¸”ä»…å½“$<strong>F_P</strong>$æ»¡è¶³</strong>åˆ†é…å¾‹</strong>ï¼ˆdistributiveï¼‰ï¼Œ<strong>$MOP$ä¸$Iterative$çš„å‡†ç¡®åº¦ç›¸ç­‰</strong></p><p>å½¢å¼åŒ–åœ°ï¼Œå³ $F(x)\sqcup F(y) = F(x\sqcup y)$</p><hr><h2 id=worklist-algorithm>Worklist Algorithm<a hidden class=anchor aria-hidden=true href=#worklist-algorithm>#</a></h2><p>å¯¹äºï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€äº›<strong>ä¼˜åŒ–</strong>çš„æ‰‹æ®µï¼Œæˆ–è€…è¯´ï¼Œconcrete methods to implementationã€‚</p><p><strong>é—®é¢˜ï¼š</strong></p><p>å¯¹äº<strong>Iterative Algorithmï¼Œ whileåˆ¤æ–­ä¸åŠ¨ç‚¹æ—¶</strong>ï¼Œå­˜åœ¨å†—ä½™çš„è®¡ç®—ï¼Œå¦‚ä½•æ¶ˆé™¤å†—ä½™ï¼Ÿ</p><p><strong>Ideaï¼š</strong></p><p>åˆ©ç”¨ä¸€ä¸ªworklistæ¥ä¿å­˜å„ä¸ªBBçš„çŠ¶æ€ï¼Œè‹¥æŸä¸ªBBå·²ç»åˆ°è¾¾ä¸åŠ¨ç‚¹ï¼Œå°±è¸¢å‡ºworklistã€‚</p><p>å¦åˆ™ï¼Œå°±éœ€è¦è®¡ç®—BBçš„æ‰€æœ‰åç»§èŠ‚ç‚¹ã€‚</p><h3 id=algorithm-forward-analysis-as-an-example>Algorithm: Forward Analysis as An Example<a hidden class=anchor aria-hidden=true href=#algorithm-forward-analysis-as-an-example>#</a></h3><img src=http://jiayezheng.tech//posts/compilers/static-analysis/data-flow-analysis/images/algorithm.png alt=algorithm><hr><h3 id=å¤ä¹ è¦ç‚¹>å¤ä¹ è¦ç‚¹<a hidden class=anchor aria-hidden=true href=#å¤ä¹ è¦ç‚¹>#</a></h3><ul><li>Understanding Functional View of Iterative Algorithm</li><li>Lattice and Complete Lattice</li><li>Fixed-Point Theorem and proof</li><li>How to summarize may and must analysis in a lattice perspective.(The picture)</li><li>The relation between MOP and the iterative algorithm by proof.</li><li>Worklist Algorithm</text></alt></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://jiayezheng.tech/tags/static-analysis/>static analysis</a></li></ul><nav class=paginav><a class=prev href=http://jiayezheng.tech/posts/compilers/java/java-value-type/java_value_type/><span class=title>Â« Prev Page</span><br><span>ã€ç¢ç¢å¿µã€‘è¯»ã€ŠJavaæœ‰å€¼ç±»å‹å—ï¼Ÿã€‹æœ‰æ„Ÿ</span></a>
<a class=next href=http://jiayezheng.tech/posts/compilers/static-analysis/data-flow-analysis/data-flow-anlaysis-applications/><span class=title>Next Page Â»</span><br><span>ã€è½¯ä»¶åˆ†æç¬”è®°ã€‘æ•°æ®æµåˆ†æï¼šåº”ç”¨ç¯‡</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=http://jiayezheng.tech/>åå£°ï¼Œåªæ˜¯ä¸€ç§ç³Ÿç³•çš„é”™è§‰</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>